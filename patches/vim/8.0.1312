To: vim_dev@googlegroups.com
Subject: Patch 8.0.1312
Fcc: outbox
From: Bram Moolenaar <Bram@moolenaar.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
------------

Patch 8.0.1312 (after 8.0.1309)
Problem:    balloon_show() only works in terminal when compiled with the GUI.
Solution:   Add FEAT_BEVAL_GUI and refactor to move common code out of the GUI
            specific file.
Files:      src/feature.h, src/evalfunc.c, src/gui.c, src/gui_athena.c,
            src/gui_beval.c, src/proto/gui_beval.pro, src/beval.c,
            src/proto/beval.pro, src/gui_motif.c, src/gui_w32.c,
            src/gui_x11.c, src/integration.c, src/workshop.c, src/menu.c,
            src/netbeans.c, src/option.c, src/os_unix.c, src/os_win32.c,
            src/syntax.c, src/version.c, src/gui.h, src/gui_beval.h,
            src/vim.h, src/beval.h, src/option.h, src/ex_cmds2.c, src/ui.c,
            src/getchar.c, src/normal.c, src/popupmnu.c, src/globals.h,
            src/Makefile, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/Make_vms.mms, Filelist


*** ../vim-8.0.1311/src/feature.h	2017-11-18 18:51:08.117770819 +0100
--- src/feature.h	2017-11-18 21:26:51.688535691 +0100
***************
*** 1317,1338 ****
  		&& !defined(FEAT_GUI_GTK) && !defined(FEAT_GUI_W32)) \
  	    || defined(FEAT_SUN_WORKSHOP) \
  	    || defined(FEAT_NETBEANS_INTG) || defined(FEAT_EVAL))
! # define FEAT_BEVAL
  # if !defined(FEAT_XFONTSET) && !defined(FEAT_GUI_GTK) \
  	&& !defined(FEAT_GUI_W32)
  #  define FEAT_XFONTSET
  # endif
  #endif
  
! #if defined(FEAT_BEVAL) && (defined(FEAT_GUI_MOTIF) || defined(FEAT_GUI_ATHENA))
  # define FEAT_BEVAL_TIP		/* balloon eval used for toolbar tooltip */
  #endif
  
  /*
   * +balloon_eval_term	Allow balloon expression evaluation in the terminal.
   */
! #if defined(FEAT_BEVAL) && defined(UNIX) && defined(FEAT_TIMERS)
! # define FEAT_BEVALTERM
  #endif
  
  /* both Motif and Athena are X11 and share some code */
--- 1317,1342 ----
  		&& !defined(FEAT_GUI_GTK) && !defined(FEAT_GUI_W32)) \
  	    || defined(FEAT_SUN_WORKSHOP) \
  	    || defined(FEAT_NETBEANS_INTG) || defined(FEAT_EVAL))
! # define FEAT_BEVAL_GUI
  # if !defined(FEAT_XFONTSET) && !defined(FEAT_GUI_GTK) \
  	&& !defined(FEAT_GUI_W32)
  #  define FEAT_XFONTSET
  # endif
  #endif
  
! #if defined(FEAT_BEVAL_GUI) && (defined(FEAT_GUI_MOTIF) || defined(FEAT_GUI_ATHENA))
  # define FEAT_BEVAL_TIP		/* balloon eval used for toolbar tooltip */
  #endif
  
  /*
   * +balloon_eval_term	Allow balloon expression evaluation in the terminal.
   */
! #if defined(FEAT_HUGE) && defined(UNIX) && defined(FEAT_TIMERS)
! # define FEAT_BEVAL_TERM
! #endif
! 
! #if defined(FEAT_BEVAL_GUI) || defined(FEAT_BEVAL_TERM)
! # define FEAT_BEVAL
  #endif
  
  /* both Motif and Athena are X11 and share some code */
*** ../vim-8.0.1311/src/evalfunc.c	2017-11-18 18:51:08.129770641 +0100
--- src/evalfunc.c	2017-11-18 20:50:30.865716834 +0100
***************
*** 5583,5595 ****
  #ifdef FEAT_AUTOSERVERNAME
  	"autoservername",
  #endif
! #ifdef FEAT_BEVAL
  	"balloon_eval",
  # ifndef FEAT_GUI_W32 /* other GUIs always have multiline balloons */
  	"balloon_multiline",
  # endif
  #endif
! #ifdef FEAT_BEVALTERM
  	"balloon_eval_term",
  #endif
  #if defined(SOME_BUILTIN_TCAPS) || defined(ALL_BUILTIN_TCAPS)
--- 5583,5595 ----
  #ifdef FEAT_AUTOSERVERNAME
  	"autoservername",
  #endif
! #ifdef FEAT_BEVAL_GUI
  	"balloon_eval",
  # ifndef FEAT_GUI_W32 /* other GUIs always have multiline balloons */
  	"balloon_multiline",
  # endif
  #endif
! #ifdef FEAT_BEVAL_TERM
  	"balloon_eval_term",
  #endif
  #if defined(SOME_BUILTIN_TCAPS) || defined(ALL_BUILTIN_TCAPS)
*** ../vim-8.0.1311/src/gui.c	2017-11-18 18:51:08.133770582 +0100
--- src/gui.c	2017-11-18 20:36:16.659287121 +0100
***************
*** 738,744 ****
  	 * resized. */
  	win_new_shellsize();
  
! #ifdef FEAT_BEVAL
  	/* Always create the Balloon Evaluation area, but disable it when
  	 * 'ballooneval' is off. */
  	if (balloonEval != NULL)
--- 738,744 ----
  	 * resized. */
  	win_new_shellsize();
  
! #ifdef FEAT_BEVAL_GUI
  	/* Always create the Balloon Evaluation area, but disable it when
  	 * 'ballooneval' is off. */
  	if (balloonEval != NULL)
*** ../vim-8.0.1311/src/gui_athena.c	2017-09-16 20:54:47.098560411 +0200
--- src/gui_athena.c	2017-11-18 20:37:02.406606643 +0100
***************
*** 1019,1025 ****
  	XFreePixmap(gui.dpy, oldpuller);
  }
  
! #if defined(FEAT_BEVAL) || defined(PROTO)
      void
  gui_mch_new_tooltip_font(void)
  {
--- 1019,1025 ----
  	XFreePixmap(gui.dpy, oldpuller);
  }
  
! #if defined(FEAT_BEVAL_GUI) || defined(PROTO)
      void
  gui_mch_new_tooltip_font(void)
  {
***************
*** 1076,1082 ****
  			XtVaSetValues(mp->id, XtNbitmap, mp->image, NULL);
  		}
  
! # ifdef FEAT_BEVAL
  		/* If we have a tooltip, then we need to change it's colors */
  		if (mp->tip != NULL)
  		{
--- 1076,1082 ----
  			XtVaSetValues(mp->id, XtNbitmap, mp->image, NULL);
  		}
  
! # ifdef FEAT_BEVAL_GUI
  		/* If we have a tooltip, then we need to change it's colors */
  		if (mp->tip != NULL)
  		{
***************
*** 1094,1100 ****
  	    else
  	    {
  		gui_athena_menu_font(mp->id);
! #ifdef FEAT_BEVAL
  		/* If we have a tooltip, then we need to change it's font */
  		/* Assume XtNinternational == True (in createBalloonEvalWindow)
  		 */
--- 1094,1100 ----
  	    else
  	    {
  		gui_athena_menu_font(mp->id);
! #ifdef FEAT_BEVAL_GUI
  		/* If we have a tooltip, then we need to change it's font */
  		/* Assume XtNinternational == True (in createBalloonEvalWindow)
  		 */
***************
*** 1201,1207 ****
  	    XtSetValues(menu->id, args, n);
  	gui_athena_menu_colors(menu->id);
  
! #ifdef FEAT_BEVAL
  	gui_mch_menu_set_tip(menu);
  #endif
  
--- 1201,1207 ----
  	    XtSetValues(menu->id, args, n);
  	gui_athena_menu_colors(menu->id);
  
! #ifdef FEAT_BEVAL_GUI
  	gui_mch_menu_set_tip(menu);
  #endif
  
***************
*** 1538,1544 ****
  	XtVaGetValues(menu->id,
  		XtNheight,	&height,
  		NULL);
! #if defined(FEAT_TOOLBAR) && defined(FEAT_BEVAL)
  	if (parent == toolBar && menu->tip != NULL)
  	{
  	    /* We try to destroy this before the actual menu, because there are
--- 1538,1544 ----
  	XtVaGetValues(menu->id,
  		XtNheight,	&height,
  		NULL);
! #if defined(FEAT_TOOLBAR) && defined(FEAT_BEVAL_GUI)
  	if (parent == toolBar && menu->tip != NULL)
  	{
  	    /* We try to destroy this before the actual menu, because there are
***************
*** 1843,1849 ****
  	gui.menu_bg_pixel = gui_get_color((char_u *)gui.rsrc_menu_bg_name);
  	gui.scroll_fg_pixel = gui_get_color((char_u *)gui.rsrc_scroll_fg_name);
  	gui.scroll_bg_pixel = gui_get_color((char_u *)gui.rsrc_scroll_bg_name);
! #ifdef FEAT_BEVAL
  	gui.tooltip_fg_pixel = gui_get_color((char_u *)gui.rsrc_tooltip_fg_name);
  	gui.tooltip_bg_pixel = gui_get_color((char_u *)gui.rsrc_tooltip_bg_name);
  #endif
--- 1843,1849 ----
  	gui.menu_bg_pixel = gui_get_color((char_u *)gui.rsrc_menu_bg_name);
  	gui.scroll_fg_pixel = gui_get_color((char_u *)gui.rsrc_scroll_fg_name);
  	gui.scroll_bg_pixel = gui_get_color((char_u *)gui.rsrc_scroll_bg_name);
! #ifdef FEAT_BEVAL_GUI
  	gui.tooltip_fg_pixel = gui_get_color((char_u *)gui.rsrc_tooltip_fg_name);
  	gui.tooltip_bg_pixel = gui_get_color((char_u *)gui.rsrc_tooltip_bg_name);
  #endif
*** ../vim-8.0.1311/src/gui_beval.c	2017-11-18 18:51:08.129770641 +0100
--- src/gui_beval.c	2017-11-18 21:20:07.058574972 +0100
***************
*** 10,123 ****
  
  #include "vim.h"
  
! #if defined(FEAT_BEVAL) || defined(PROTO)
! 
! /*
!  * Common code, invoked when the mouse is resting for a moment.
!  */
!     void
! general_beval_cb(BalloonEval *beval, int state UNUSED)
! {
! #ifdef FEAT_EVAL
!     win_T	*wp;
!     int		col;
!     int		use_sandbox;
!     linenr_T	lnum;
!     char_u	*text;
!     static char_u  *result = NULL;
!     long	winnr = 0;
!     char_u	*bexpr;
!     buf_T	*save_curbuf;
!     size_t	len;
!     win_T	*cw;
! #endif
!     static int	recursive = FALSE;
! 
!     /* Don't do anything when 'ballooneval' is off, messages scrolled the
!      * windows up or we have no beval area. */
!     if (!((gui.in_use && p_beval)
! # ifdef FEAT_BEVALTERM
! 		|| (!gui.in_use && p_bevalterm)
! # endif
! 		) || beval == NULL || msg_scrolled > 0)
! 	return;
! 
!     /* Don't do this recursively.  Happens when the expression evaluation
!      * takes a long time and invokes something that checks for CTRL-C typed. */
!     if (recursive)
! 	return;
!     recursive = TRUE;
! 
! #ifdef FEAT_EVAL
!     if (get_beval_info(beval, TRUE, &wp, &lnum, &text, &col) == OK)
!     {
! 	bexpr = (*wp->w_buffer->b_p_bexpr == NUL) ? p_bexpr
! 						    : wp->w_buffer->b_p_bexpr;
! 	if (*bexpr != NUL)
! 	{
! 	    /* Convert window pointer to number. */
! 	    for (cw = firstwin; cw != wp; cw = cw->w_next)
! 		++winnr;
! 
! 	    set_vim_var_nr(VV_BEVAL_BUFNR, (long)wp->w_buffer->b_fnum);
! 	    set_vim_var_nr(VV_BEVAL_WINNR, winnr);
! 	    set_vim_var_nr(VV_BEVAL_WINID, wp->w_id);
! 	    set_vim_var_nr(VV_BEVAL_LNUM, (long)lnum);
! 	    set_vim_var_nr(VV_BEVAL_COL, (long)(col + 1));
! 	    set_vim_var_string(VV_BEVAL_TEXT, text, -1);
! 	    vim_free(text);
! 
! 	    /*
! 	     * Temporarily change the curbuf, so that we can determine whether
! 	     * the buffer-local balloonexpr option was set insecurely.
! 	     */
! 	    save_curbuf = curbuf;
! 	    curbuf = wp->w_buffer;
! 	    use_sandbox = was_set_insecurely((char_u *)"balloonexpr",
! 				 *curbuf->b_p_bexpr == NUL ? 0 : OPT_LOCAL);
! 	    curbuf = save_curbuf;
! 	    if (use_sandbox)
! 		++sandbox;
! 	    ++textlock;
! 
! 	    vim_free(result);
! 	    result = eval_to_string(bexpr, NULL, TRUE);
! 
! 	    /* Remove one trailing newline, it is added when the result was a
! 	     * list and it's hardly ever useful.  If the user really wants a
! 	     * trailing newline he can add two and one remains. */
! 	    if (result != NULL)
! 	    {
! 		len = STRLEN(result);
! 		if (len > 0 && result[len - 1] == NL)
! 		    result[len - 1] = NUL;
! 	    }
! 
! 	    if (use_sandbox)
! 		--sandbox;
! 	    --textlock;
! 
! 	    set_vim_var_string(VV_BEVAL_TEXT, NULL, -1);
! 	    if (result != NULL && result[0] != NUL)
! 	    {
! 		post_balloon(beval, result);
! 		recursive = FALSE;
! 		return;
! 	    }
! 	}
!     }
! #endif
! #ifdef FEAT_NETBEANS_INTG
!     if (bevalServers & BEVAL_NETBEANS)
! 	netbeans_beval_cb(beval, state);
! #endif
! #ifdef FEAT_SUN_WORKSHOP
!     if (bevalServers & BEVAL_WORKSHOP)
! 	workshop_beval_cb(beval, state);
! #endif
! 
!     recursive = FALSE;
! }
  
  /* on Win32 only get_beval_info() is required */
  #if !defined(FEAT_GUI_W32) || defined(PROTO)
--- 10,16 ----
  
  #include "vim.h"
  
! #if defined(FEAT_BEVAL_GUI) || defined(PROTO)
  
  /* on Win32 only get_beval_info() is required */
  #if !defined(FEAT_GUI_W32) || defined(PROTO)
***************
*** 149,156 ****
  # endif
  #endif
  
- #include "gui_beval.h"
- 
  #ifndef FEAT_GUI_GTK
  extern Widget vimShell;
  
--- 42,47 ----
***************
*** 192,199 ****
  static void undrawBalloon(BalloonEval *beval);
  static void createBalloonEvalWindow(BalloonEval *);
  
- 
- 
  /*
   * Create a balloon-evaluation area for a Widget.
   * There can be either a "mesg" for a fixed string or "mesgCB" to generate a
--- 83,88 ----
***************
*** 318,454 ****
  
  #if defined(FEAT_SUN_WORKSHOP) || defined(FEAT_NETBEANS_INTG) \
      || defined(FEAT_EVAL) || defined(PROTO)
- /*
-  * Get the text and position to be evaluated for "beval".
-  * If "getword" is true the returned text is not the whole line but the
-  * relevant word in allocated memory.
-  * Returns OK or FAIL.
-  */
-     int
- get_beval_info(
-     BalloonEval	*beval,
-     int		getword,
-     win_T	**winp,
-     linenr_T	*lnump,
-     char_u	**textp,
-     int		*colp)
- {
-     win_T	*wp;
-     int		row, col;
-     char_u	*lbuf;
-     linenr_T	lnum;
- 
-     *textp = NULL;
- # ifdef FEAT_BEVALTERM
-     if (!gui.in_use)
-     {
- 	row = mouse_row;
- 	col = mouse_col;
-     }
-     else
- # endif
-     {
- 	row = Y_2_ROW(beval->y);
- 	col = X_2_COL(beval->x);
-     }
-     wp = mouse_find_win(&row, &col);
-     if (wp != NULL && row < wp->w_height && col < wp->w_width)
-     {
- 	/* Found a window and the cursor is in the text.  Now find the line
- 	 * number. */
- 	if (!mouse_comp_pos(wp, &row, &col, &lnum))
- 	{
- 	    /* Not past end of the file. */
- 	    lbuf = ml_get_buf(wp->w_buffer, lnum, FALSE);
- 	    if (col <= win_linetabsize(wp, lbuf, (colnr_T)MAXCOL))
- 	    {
- 		/* Not past end of line. */
- 		if (getword)
- 		{
- 		    /* For Netbeans we get the relevant part of the line
- 		     * instead of the whole line. */
- 		    int		len;
- 		    pos_T	*spos = NULL, *epos = NULL;
- 
- 		    if (VIsual_active)
- 		    {
- 			if (LT_POS(VIsual, curwin->w_cursor))
- 			{
- 			    spos = &VIsual;
- 			    epos = &curwin->w_cursor;
- 			}
- 			else
- 			{
- 			    spos = &curwin->w_cursor;
- 			    epos = &VIsual;
- 			}
- 		    }
- 
- 		    col = vcol2col(wp, lnum, col);
- 
- 		    if (VIsual_active
- 			    && wp->w_buffer == curwin->w_buffer
- 			    && (lnum == spos->lnum
- 				? col >= (int)spos->col
- 				: lnum > spos->lnum)
- 			    && (lnum == epos->lnum
- 				? col <= (int)epos->col
- 				: lnum < epos->lnum))
- 		    {
- 			/* Visual mode and pointing to the line with the
- 			 * Visual selection: return selected text, with a
- 			 * maximum of one line. */
- 			if (spos->lnum != epos->lnum || spos->col == epos->col)
- 			    return FAIL;
- 
- 			lbuf = ml_get_buf(curwin->w_buffer, VIsual.lnum, FALSE);
- 			len = epos->col - spos->col;
- 			if (*p_sel != 'e')
- 			    len += MB_PTR2LEN(lbuf + epos->col);
- 			lbuf = vim_strnsave(lbuf + spos->col, len);
- 			lnum = spos->lnum;
- 			col = spos->col;
- 		    }
- 		    else
- 		    {
- 			/* Find the word under the cursor. */
- 			++emsg_off;
- 			len = find_ident_at_pos(wp, lnum, (colnr_T)col, &lbuf,
- 					FIND_IDENT + FIND_STRING + FIND_EVAL);
- 			--emsg_off;
- 			if (len == 0)
- 			    return FAIL;
- 			lbuf = vim_strnsave(lbuf, len);
- 		    }
- 		}
- 
- 		*winp = wp;
- 		*lnump = lnum;
- 		*textp = lbuf;
- 		*colp = col;
- 		beval->ts = wp->w_buffer->b_p_ts;
- 		return OK;
- 	    }
- 	}
-     }
- 
-     return FAIL;
- }
- 
- /*
-  * Show a balloon with "mesg".
-  */
-     void
- post_balloon(BalloonEval *beval, char_u *mesg)
- {
- # ifdef FEAT_BEVALTERM
-     if (!gui.in_use)
- 	ui_post_balloon(mesg);
-     else
- # endif
- 	gui_mch_post_balloon(beval, mesg);
- }
- 
  # if !defined(FEAT_GUI_W32) || defined(PROTO)
  
  /*
--- 207,212 ----
***************
*** 463,469 ****
      else
  	undrawBalloon(beval);
  }
! # endif /* FEAT_GUI_W32 */
  #endif /* FEAT_SUN_WORKSHOP || FEAT_NETBEANS_INTG || PROTO */
  
  #if !defined(FEAT_GUI_W32) || defined(PROTO)
--- 221,227 ----
      else
  	undrawBalloon(beval);
  }
! # endif /* !FEAT_GUI_W32 */
  #endif /* FEAT_SUN_WORKSHOP || FEAT_NETBEANS_INTG || PROTO */
  
  #if !defined(FEAT_GUI_W32) || defined(PROTO)
***************
*** 1519,1522 ****
  #endif /* !FEAT_GUI_GTK */
  #endif /* !FEAT_GUI_W32 */
  
! #endif /* FEAT_BEVAL */
--- 1277,1280 ----
  #endif /* !FEAT_GUI_GTK */
  #endif /* !FEAT_GUI_W32 */
  
! #endif /* FEAT_BEVAL_GUI */
*** ../vim-8.0.1311/src/proto/gui_beval.pro	2017-11-18 18:51:08.129770641 +0100
--- src/proto/gui_beval.pro	2017-11-18 22:09:22.377330544 +0100
***************
*** 1,12 ****
  /* gui_beval.c */
- void general_beval_cb(BalloonEval *beval, int state);
  BalloonEval *gui_mch_create_beval_area(void *target, char_u *mesg, void (*mesgCB)(BalloonEval *, int), void *clientData);
  void gui_mch_destroy_beval_area(BalloonEval *beval);
  void gui_mch_enable_beval_area(BalloonEval *beval);
  void gui_mch_disable_beval_area(BalloonEval *beval);
  BalloonEval *gui_mch_currently_showing_beval(void);
- int get_beval_info(BalloonEval *beval, int getword, win_T **winp, linenr_T *lnump, char_u **textp, int *colp);
- void post_balloon(BalloonEval *beval, char_u *mesg);
  void gui_mch_post_balloon(BalloonEval *beval, char_u *mesg);
  void gui_mch_unpost_balloon(BalloonEval *beval);
  /* vim: set ft=c : */
--- 1,9 ----
*** ../vim-8.0.1311/src/beval.c	2017-11-18 22:09:42.625018627 +0100
--- src/beval.c	2017-11-18 21:44:10.760891582 +0100
***************
*** 0 ****
--- 1,280 ----
+ /* vi:set ts=8 sts=4 sw=4 noet:
+  *
+  * VIM - Vi IMproved	by Bram Moolenaar
+  *			Visual Workshop integration by Gordon Prieur
+  *
+  * Do ":help uganda"  in Vim to read copying and usage conditions.
+  * Do ":help credits" in Vim to see a list of people who contributed.
+  * See README.txt for an overview of the Vim source code.
+  */
+ 
+ #include "vim.h"
+ 
+ #if defined(FEAT_BEVAL) || defined(PROTO)
+ 
+ /*
+  * Get the text and position to be evaluated for "beval".
+  * If "getword" is true the returned text is not the whole line but the
+  * relevant word in allocated memory.
+  * Returns OK or FAIL.
+  */
+     int
+ get_beval_info(
+     BalloonEval	*beval,
+     int		getword,
+     win_T	**winp,
+     linenr_T	*lnump,
+     char_u	**textp,
+     int		*colp)
+ {
+     win_T	*wp;
+     int		row, col;
+     char_u	*lbuf;
+     linenr_T	lnum;
+ 
+     *textp = NULL;
+ # ifdef FEAT_BEVAL_TERM
+ #  ifdef FEAT_GUI
+     if (!gui.in_use)
+ #  endif
+     {
+ 	row = mouse_row;
+ 	col = mouse_col;
+     }
+ # endif
+ # ifdef FEAT_GUI
+     if (gui.in_use)
+     {
+ 	row = Y_2_ROW(beval->y);
+ 	col = X_2_COL(beval->x);
+     }
+ #endif
+     wp = mouse_find_win(&row, &col);
+     if (wp != NULL && row < wp->w_height && col < wp->w_width)
+     {
+ 	/* Found a window and the cursor is in the text.  Now find the line
+ 	 * number. */
+ 	if (!mouse_comp_pos(wp, &row, &col, &lnum))
+ 	{
+ 	    /* Not past end of the file. */
+ 	    lbuf = ml_get_buf(wp->w_buffer, lnum, FALSE);
+ 	    if (col <= win_linetabsize(wp, lbuf, (colnr_T)MAXCOL))
+ 	    {
+ 		/* Not past end of line. */
+ 		if (getword)
+ 		{
+ 		    /* For Netbeans we get the relevant part of the line
+ 		     * instead of the whole line. */
+ 		    int		len;
+ 		    pos_T	*spos = NULL, *epos = NULL;
+ 
+ 		    if (VIsual_active)
+ 		    {
+ 			if (LT_POS(VIsual, curwin->w_cursor))
+ 			{
+ 			    spos = &VIsual;
+ 			    epos = &curwin->w_cursor;
+ 			}
+ 			else
+ 			{
+ 			    spos = &curwin->w_cursor;
+ 			    epos = &VIsual;
+ 			}
+ 		    }
+ 
+ 		    col = vcol2col(wp, lnum, col);
+ 
+ 		    if (VIsual_active
+ 			    && wp->w_buffer == curwin->w_buffer
+ 			    && (lnum == spos->lnum
+ 				? col >= (int)spos->col
+ 				: lnum > spos->lnum)
+ 			    && (lnum == epos->lnum
+ 				? col <= (int)epos->col
+ 				: lnum < epos->lnum))
+ 		    {
+ 			/* Visual mode and pointing to the line with the
+ 			 * Visual selection: return selected text, with a
+ 			 * maximum of one line. */
+ 			if (spos->lnum != epos->lnum || spos->col == epos->col)
+ 			    return FAIL;
+ 
+ 			lbuf = ml_get_buf(curwin->w_buffer, VIsual.lnum, FALSE);
+ 			len = epos->col - spos->col;
+ 			if (*p_sel != 'e')
+ 			    len += MB_PTR2LEN(lbuf + epos->col);
+ 			lbuf = vim_strnsave(lbuf + spos->col, len);
+ 			lnum = spos->lnum;
+ 			col = spos->col;
+ 		    }
+ 		    else
+ 		    {
+ 			/* Find the word under the cursor. */
+ 			++emsg_off;
+ 			len = find_ident_at_pos(wp, lnum, (colnr_T)col, &lbuf,
+ 					FIND_IDENT + FIND_STRING + FIND_EVAL);
+ 			--emsg_off;
+ 			if (len == 0)
+ 			    return FAIL;
+ 			lbuf = vim_strnsave(lbuf, len);
+ 		    }
+ 		}
+ 
+ 		*winp = wp;
+ 		*lnump = lnum;
+ 		*textp = lbuf;
+ 		*colp = col;
+ 		beval->ts = wp->w_buffer->b_p_ts;
+ 		return OK;
+ 	    }
+ 	}
+     }
+ 
+     return FAIL;
+ }
+ 
+ /*
+  * Show a balloon with "mesg".
+  */
+     void
+ post_balloon(BalloonEval *beval UNUSED, char_u *mesg)
+ {
+ # ifdef FEAT_BEVAL_TERM
+ #  ifdef FEAT_GUI
+     if (!gui.in_use)
+ #  endif
+ 	ui_post_balloon(mesg);
+ # endif
+ # ifdef FEAT_BEVAL_GUI
+     if (gui.in_use)
+ 	gui_mch_post_balloon(beval, mesg);
+ # endif
+ }
+ 
+ /*
+  * Returns TRUE if the balloon eval has been enabled:
+  * 'ballooneval' for the GUI and 'balloonevalterm' for the terminal.
+  * Also checks if the screen isn't scrolled up.
+  */
+     int
+ can_use_beval(void)
+ {
+     return (0
+ #ifdef FEAT_BEVAL_GUI
+ 		|| (gui.in_use && p_beval)
+ #endif
+ #ifdef FEAT_BEVAL_TERM
+ 		|| (
+ # ifdef FEAT_GUI
+ 		    !gui.in_use &&
+ # endif
+ 		    p_bevalterm)
+ #endif
+ 	     ) && msg_scrolled == 0;
+ }
+ 
+ /*
+  * Common code, invoked when the mouse is resting for a moment.
+  */
+     void
+ general_beval_cb(BalloonEval *beval, int state UNUSED)
+ {
+ #ifdef FEAT_EVAL
+     win_T	*wp;
+     int		col;
+     int		use_sandbox;
+     linenr_T	lnum;
+     char_u	*text;
+     static char_u  *result = NULL;
+     long	winnr = 0;
+     char_u	*bexpr;
+     buf_T	*save_curbuf;
+     size_t	len;
+     win_T	*cw;
+ #endif
+     static int	recursive = FALSE;
+ 
+     /* Don't do anything when 'ballooneval' is off, messages scrolled the
+      * windows up or we have no beval area. */
+     if (!can_use_beval() || beval == NULL)
+ 	return;
+ 
+     /* Don't do this recursively.  Happens when the expression evaluation
+      * takes a long time and invokes something that checks for CTRL-C typed. */
+     if (recursive)
+ 	return;
+     recursive = TRUE;
+ 
+ #ifdef FEAT_EVAL
+     if (get_beval_info(beval, TRUE, &wp, &lnum, &text, &col) == OK)
+     {
+ 	bexpr = (*wp->w_buffer->b_p_bexpr == NUL) ? p_bexpr
+ 						    : wp->w_buffer->b_p_bexpr;
+ 	if (*bexpr != NUL)
+ 	{
+ 	    /* Convert window pointer to number. */
+ 	    for (cw = firstwin; cw != wp; cw = cw->w_next)
+ 		++winnr;
+ 
+ 	    set_vim_var_nr(VV_BEVAL_BUFNR, (long)wp->w_buffer->b_fnum);
+ 	    set_vim_var_nr(VV_BEVAL_WINNR, winnr);
+ 	    set_vim_var_nr(VV_BEVAL_WINID, wp->w_id);
+ 	    set_vim_var_nr(VV_BEVAL_LNUM, (long)lnum);
+ 	    set_vim_var_nr(VV_BEVAL_COL, (long)(col + 1));
+ 	    set_vim_var_string(VV_BEVAL_TEXT, text, -1);
+ 	    vim_free(text);
+ 
+ 	    /*
+ 	     * Temporarily change the curbuf, so that we can determine whether
+ 	     * the buffer-local balloonexpr option was set insecurely.
+ 	     */
+ 	    save_curbuf = curbuf;
+ 	    curbuf = wp->w_buffer;
+ 	    use_sandbox = was_set_insecurely((char_u *)"balloonexpr",
+ 				 *curbuf->b_p_bexpr == NUL ? 0 : OPT_LOCAL);
+ 	    curbuf = save_curbuf;
+ 	    if (use_sandbox)
+ 		++sandbox;
+ 	    ++textlock;
+ 
+ 	    vim_free(result);
+ 	    result = eval_to_string(bexpr, NULL, TRUE);
+ 
+ 	    /* Remove one trailing newline, it is added when the result was a
+ 	     * list and it's hardly ever useful.  If the user really wants a
+ 	     * trailing newline he can add two and one remains. */
+ 	    if (result != NULL)
+ 	    {
+ 		len = STRLEN(result);
+ 		if (len > 0 && result[len - 1] == NL)
+ 		    result[len - 1] = NUL;
+ 	    }
+ 
+ 	    if (use_sandbox)
+ 		--sandbox;
+ 	    --textlock;
+ 
+ 	    set_vim_var_string(VV_BEVAL_TEXT, NULL, -1);
+ 	    if (result != NULL && result[0] != NUL)
+ 	    {
+ 		post_balloon(beval, result);
+ 		recursive = FALSE;
+ 		return;
+ 	    }
+ 	}
+     }
+ #endif
+ #ifdef FEAT_NETBEANS_INTG
+     if (bevalServers & BEVAL_NETBEANS)
+ 	netbeans_beval_cb(beval, state);
+ #endif
+ #ifdef FEAT_SUN_WORKSHOP
+     if (bevalServers & BEVAL_WORKSHOP)
+ 	workshop_beval_cb(beval, state);
+ #endif
+ 
+     recursive = FALSE;
+ }
+ 
+ #endif
+ 
*** ../vim-8.0.1311/src/proto/beval.pro	2017-11-18 22:09:42.633018504 +0100
--- src/proto/beval.pro	2017-11-18 21:44:24.776680065 +0100
***************
*** 0 ****
--- 1,6 ----
+ /* beval.c */
+ int get_beval_info(BalloonEval *beval, int getword, win_T **winp, linenr_T *lnump, char_u **textp, int *colp);
+ void post_balloon(BalloonEval *beval, char_u *mesg);
+ int can_use_beval(void);
+ void general_beval_cb(BalloonEval *beval, int state);
+ /* vim: set ft=c : */
*** ../vim-8.0.1311/src/gui_motif.c	2017-09-16 20:54:47.102560387 +0200
--- src/gui_motif.c	2017-11-18 20:37:55.117822408 +0100
***************
*** 1360,1366 ****
  	if (xms != NULL)
  	    XmStringFree(xms);
  
! # ifdef FEAT_BEVAL
  	gui_mch_menu_set_tip(menu);
  # endif
  
--- 1360,1366 ----
  	if (xms != NULL)
  	    XmStringFree(xms);
  
! # ifdef FEAT_BEVAL_GUI
  	gui_mch_menu_set_tip(menu);
  # endif
  
***************
*** 1509,1515 ****
      ui_new_shellsize();
  }
  
! #if defined(FEAT_BEVAL) || defined(PROTO)
      void
  gui_mch_new_tooltip_font(void)
  {
--- 1509,1515 ----
      ui_new_shellsize();
  }
  
! #if defined(FEAT_BEVAL_GUI) || defined(PROTO)
      void
  gui_mch_new_tooltip_font(void)
  {
***************
*** 1566,1572 ****
  		    n = add_pixmap_args(mp, args, n);
  		    XtSetValues(mp->id, args, n);
  		}
! # ifdef FEAT_BEVAL
  		/* If we have a tooltip, then we need to change it's font */
  		if (mp->tip != NULL)
  		{
--- 1566,1572 ----
  		    n = add_pixmap_args(mp, args, n);
  		    XtSetValues(mp->id, args, n);
  		}
! # ifdef FEAT_BEVAL_GUI
  		/* If we have a tooltip, then we need to change it's font */
  		if (mp->tip != NULL)
  		{
***************
*** 1584,1590 ****
  	    else
  	    {
  		gui_motif_menu_fontlist(mp->id);
! #ifdef FEAT_BEVAL
  		/* If we have a tooltip, then we need to change it's font */
  		if (mp->tip != NULL)
  		{
--- 1584,1590 ----
  	    else
  	    {
  		gui_motif_menu_fontlist(mp->id);
! #ifdef FEAT_BEVAL_GUI
  		/* If we have a tooltip, then we need to change it's font */
  		if (mp->tip != NULL)
  		{
***************
*** 1642,1648 ****
  	Widget	    parent;
  
  	parent = XtParent(menu->id);
! #if defined(FEAT_TOOLBAR) && defined(FEAT_BEVAL)
  	if (parent == toolBar && menu->tip != NULL)
  	{
  	    /* We try to destroy this before the actual menu, because there are
--- 1642,1648 ----
  	Widget	    parent;
  
  	parent = XtParent(menu->id);
! #if defined(FEAT_TOOLBAR) && defined(FEAT_BEVAL_GUI)
  	if (parent == toolBar && menu->tip != NULL)
  	{
  	    /* We try to destroy this before the actual menu, because there are
***************
*** 1703,1709 ****
  	gui.menu_bg_pixel = gui.menu_def_bg_pixel;
  	gui.scroll_fg_pixel = gui.scroll_def_fg_pixel;
  	gui.scroll_bg_pixel = gui.scroll_def_bg_pixel;
! #ifdef FEAT_BEVAL
  	gui.tooltip_fg_pixel =
  			gui_get_color((char_u *)gui.rsrc_tooltip_fg_name);
  	gui.tooltip_bg_pixel =
--- 1703,1709 ----
  	gui.menu_bg_pixel = gui.menu_def_bg_pixel;
  	gui.scroll_fg_pixel = gui.scroll_def_fg_pixel;
  	gui.scroll_bg_pixel = gui.scroll_def_bg_pixel;
! #ifdef FEAT_BEVAL_GUI
  	gui.tooltip_fg_pixel =
  			gui_get_color((char_u *)gui.rsrc_tooltip_fg_name);
  	gui.tooltip_bg_pixel =
*** ../vim-8.0.1311/src/gui_w32.c	2017-11-09 18:33:22.408374709 +0100
--- src/gui_w32.c	2017-11-18 21:10:10.419517509 +0100
***************
*** 197,203 ****
  #ifndef __MINGW32__
  # include <shellapi.h>
  #endif
! #if defined(FEAT_TOOLBAR) || defined(FEAT_BEVAL) || defined(FEAT_GUI_TABLINE)
  # include <commctrl.h>
  #endif
  #include <windowsx.h>
--- 197,203 ----
  #ifndef __MINGW32__
  # include <shellapi.h>
  #endif
! #if defined(FEAT_TOOLBAR) || defined(FEAT_BEVAL_GUI) || defined(FEAT_GUI_TABLINE)
  # include <commctrl.h>
  #endif
  #include <windowsx.h>
***************
*** 473,479 ****
  static int	s_timed_out = FALSE;
  static int	dead_key = 0;	/* 0: no dead key, 1: dead key pressed */
  
! #ifdef FEAT_BEVAL
  /* balloon-eval WM_NOTIFY_HANDLER */
  static void Handle_WM_Notify(HWND hwnd, LPNMHDR pnmh);
  static void TrackUserActivity(UINT uMsg);
--- 473,479 ----
  static int	s_timed_out = FALSE;
  static int	dead_key = 0;	/* 0: no dead key, 1: dead key pressed */
  
! #ifdef FEAT_BEVAL_GUI
  /* balloon-eval WM_NOTIFY_HANDLER */
  static void Handle_WM_Notify(HWND hwnd, LPNMHDR pnmh);
  static void TrackUserActivity(UINT uMsg);
***************
*** 1216,1222 ****
      s_wParam = wParam;
      s_lParam = lParam;
  
! #ifdef FEAT_BEVAL
      TrackUserActivity(uMsg);
  #endif
  
--- 1216,1222 ----
      s_wParam = wParam;
      s_lParam = lParam;
  
! #ifdef FEAT_BEVAL_GUI
      TrackUserActivity(uMsg);
  #endif
  
***************
*** 1237,1243 ****
  	HANDLE_MSG(hwnd, WM_XBUTTONDOWN,_OnMouseButtonDown);
  	HANDLE_MSG(hwnd, WM_XBUTTONUP,	_OnMouseMoveOrRelease);
  
! #ifdef FEAT_BEVAL
  	case WM_NOTIFY: Handle_WM_Notify(hwnd, (LPNMHDR)lParam);
  	    return TRUE;
  #endif
--- 1237,1243 ----
  	HANDLE_MSG(hwnd, WM_XBUTTONDOWN,_OnMouseButtonDown);
  	HANDLE_MSG(hwnd, WM_XBUTTONUP,	_OnMouseMoveOrRelease);
  
! #ifdef FEAT_BEVAL_GUI
  	case WM_NOTIFY: Handle_WM_Notify(hwnd, (LPNMHDR)lParam);
  	    return TRUE;
  #endif
***************
*** 4231,4237 ****
  #endif
  
  
! #ifdef FEAT_BEVAL
  # define ID_BEVAL_TOOLTIP   200
  # define BEVAL_TEXT_LEN	    MAXPATHL
  
--- 4231,4237 ----
  #endif
  
  
! #ifdef FEAT_BEVAL_GUI
  # define ID_BEVAL_TOOLTIP   200
  # define BEVAL_TEXT_LEN	    MAXPATHL
  
***************
*** 4310,4316 ****
  # define TTN_GETDISPINFO	(TTN_FIRST - 0)
  #endif
  
! #endif /* defined(FEAT_BEVAL) */
  
  #if defined(FEAT_TOOLBAR) || defined(FEAT_GUI_TABLINE)
  /* Older MSVC compilers don't have LPNMTTDISPINFO[AW] thus we need to define
--- 4310,4316 ----
  # define TTN_GETDISPINFO	(TTN_FIRST - 0)
  #endif
  
! #endif /* defined(FEAT_BEVAL_GUI) */
  
  #if defined(FEAT_TOOLBAR) || defined(FEAT_GUI_TABLINE)
  /* Older MSVC compilers don't have LPNMTTDISPINFO[AW] thus we need to define
***************
*** 8517,8528 ****
  }
  #endif
  
! #if defined(FEAT_BEVAL) || defined(PROTO)
  
  /* BALLOON-EVAL IMPLEMENTATION FOR WINDOWS.
   *  Added by Sergey Khorev <sergey.khorev@gmail.com>
   *
!  * The only reused thing is gui_beval.h and get_beval_info()
   * from gui_beval.c (note it uses x and y of the BalloonEval struct
   * to get current mouse position).
   *
--- 8517,8528 ----
  }
  #endif
  
! #if defined(FEAT_BEVAL_GUI) || defined(PROTO)
  
  /* BALLOON-EVAL IMPLEMENTATION FOR WINDOWS.
   *  Added by Sergey Khorev <sergey.khorev@gmail.com>
   *
!  * The only reused thing is beval.h and get_beval_info()
   * from gui_beval.c (note it uses x and y of the BalloonEval struct
   * to get current mouse position).
   *
***************
*** 8847,8853 ****
  {
      vim_free(beval);
  }
! #endif /* FEAT_BEVAL */
  
  #if defined(FEAT_NETBEANS_INTG) || defined(PROTO)
  /*
--- 8847,8853 ----
  {
      vim_free(beval);
  }
! #endif /* FEAT_BEVAL_GUI */
  
  #if defined(FEAT_NETBEANS_INTG) || defined(PROTO)
  /*
*** ../vim-8.0.1311/src/gui_x11.c	2017-09-02 18:33:52.449554495 +0200
--- src/gui_x11.c	2017-11-18 21:10:32.179186092 +0100
***************
*** 50,59 ****
  # include <X11/Xmu/Editres.h>
  #endif
  
- #ifdef FEAT_BEVAL_TIP
- # include "gui_beval.h"
- #endif
- 
  #define VIM_NAME	"vim"
  #define VIM_CLASS	"Vim"
  
--- 50,55 ----
***************
*** 446,452 ****
  	XtRString,
  	DFLT_SCROLL_BG_COLOR
      },
! #ifdef FEAT_BEVAL
      {
  	XtNtooltipForeground,
  	XtCTooltipForeground,
--- 442,448 ----
  	XtRString,
  	DFLT_SCROLL_BG_COLOR
      },
! #ifdef FEAT_BEVAL_GUI
      {
  	XtNtooltipForeground,
  	XtCTooltipForeground,
***************
*** 484,490 ****
  	XtRImmediate,
  	(XtPointer)NOFONTSET
      },
! #endif /* FEAT_BEVAL */
  #ifdef FEAT_XIM
      {
  	"preeditType",
--- 480,486 ----
  	XtRImmediate,
  	(XtPointer)NOFONTSET
      },
! #endif /* FEAT_BEVAL_GUI */
  #ifdef FEAT_XIM
      {
  	"preeditType",
***************
*** 1355,1361 ****
      gui.menu_bg_pixel = gui_get_color((char_u *)gui.rsrc_menu_bg_name);
      gui.scroll_fg_pixel = gui_get_color((char_u *)gui.rsrc_scroll_fg_name);
      gui.scroll_bg_pixel = gui_get_color((char_u *)gui.rsrc_scroll_bg_name);
! #ifdef FEAT_BEVAL
      gui.tooltip_fg_pixel = gui_get_color((char_u *)gui.rsrc_tooltip_fg_name);
      gui.tooltip_bg_pixel = gui_get_color((char_u *)gui.rsrc_tooltip_bg_name);
  #endif
--- 1351,1357 ----
      gui.menu_bg_pixel = gui_get_color((char_u *)gui.rsrc_menu_bg_name);
      gui.scroll_fg_pixel = gui_get_color((char_u *)gui.rsrc_scroll_fg_name);
      gui.scroll_bg_pixel = gui_get_color((char_u *)gui.rsrc_scroll_bg_name);
! #ifdef FEAT_BEVAL_GUI
      gui.tooltip_fg_pixel = gui_get_color((char_u *)gui.rsrc_tooltip_fg_name);
      gui.tooltip_bg_pixel = gui_get_color((char_u *)gui.rsrc_tooltip_bg_name);
  #endif
***************
*** 1544,1550 ****
  	workshop_connect(app_context);
  #endif
  
! #ifdef FEAT_BEVAL
      gui_init_tooltip_font();
  #endif
  #ifdef FEAT_MENU
--- 1540,1546 ----
  	workshop_connect(app_context);
  #endif
  
! #ifdef FEAT_BEVAL_GUI
      gui_init_tooltip_font();
  #endif
  #ifdef FEAT_MENU
***************
*** 1685,1691 ****
      return OK;
  }
  
! #if defined(FEAT_BEVAL) || defined(PROTO)
  /*
   * Convert the tooltip fontset name to an XFontSet.
   */
--- 1681,1687 ----
      return OK;
  }
  
! #if defined(FEAT_BEVAL_GUI) || defined(PROTO)
  /*
   * Convert the tooltip fontset name to an XFontSet.
   */
***************
*** 3411,3417 ****
  }
  #endif
  
! #if (defined(FEAT_TOOLBAR) && defined(FEAT_BEVAL)) || defined(PROTO)
  /*
   * Set the balloon-eval used for the tooltip of a toolbar menu item.
   * The check for a non-toolbar item was added, because there is a crash when
--- 3407,3413 ----
  }
  #endif
  
! #if (defined(FEAT_TOOLBAR) && defined(FEAT_BEVAL_GUI)) || defined(PROTO)
  /*
   * Set the balloon-eval used for the tooltip of a toolbar menu item.
   * The check for a non-toolbar item was added, because there is a crash when
*** ../vim-8.0.1311/src/integration.c	2016-08-29 22:42:20.000000000 +0200
--- src/integration.c	2017-11-18 20:39:10.888694809 +0100
***************
*** 1077,1083 ****
  }
  
  /* Send a message to eserve */
! #if defined(NOHANDS_SUPPORT_FUNCTIONS) || defined(FEAT_BEVAL)
  void workshop_send_message(char *buf)
  {
  	dummy = write(sd, buf, strlen(buf));
--- 1077,1083 ----
  }
  
  /* Send a message to eserve */
! #if defined(NOHANDS_SUPPORT_FUNCTIONS) || defined(FEAT_BEVAL_GUI)
  void workshop_send_message(char *buf)
  {
  	dummy = write(sd, buf, strlen(buf));
*** ../vim-8.0.1311/src/workshop.c	2017-09-16 20:54:47.122560269 +0200
--- src/workshop.c	2017-11-18 21:10:42.359031065 +0100
***************
*** 33,39 ****
  
  #include "vim.h"
  #include "version.h"
- #include "gui_beval.h"
  #include "workshop.h"
  
  void		 workshop_hotkeys(Boolean);
--- 33,38 ----
***************
*** 48,54 ****
  static void	 load_buffer_by_name(char *, int);
  static void	 load_window(char *, int lnum);
  static void	 warp_to_pc(int);
! #ifdef FEAT_BEVAL
  void		 workshop_beval_cb(BalloonEval *, int);
  static int	 computeIndex(int, char_u *, int);
  #endif
--- 47,53 ----
  static void	 load_buffer_by_name(char *, int);
  static void	 load_window(char *, int lnum);
  static void	 warp_to_pc(int);
! #ifdef FEAT_BEVAL_GUI
  void		 workshop_beval_cb(BalloonEval *, int);
  static int	 computeIndex(int, char_u *, int);
  #endif
***************
*** 208,214 ****
  	wstrace("workshop_load_file(%s, %d)\n", filename, line);
  #endif
  
! #ifdef FEAT_BEVAL
      bevalServers |= BEVAL_WORKSHOP;
  #endif
  
--- 207,213 ----
  	wstrace("workshop_load_file(%s, %d)\n", filename, line);
  #endif
  
! #ifdef FEAT_BEVAL_GUI
      bevalServers |= BEVAL_WORKSHOP;
  #endif
  
***************
*** 1497,1503 ****
  	return NULL;
  }
  
! #ifdef FEAT_BEVAL
      void
  workshop_beval_cb(
  	BalloonEval	*beval,
--- 1496,1502 ----
  	return NULL;
  }
  
! #ifdef FEAT_BEVAL_GUI
      void
  workshop_beval_cb(
  	BalloonEval	*beval,
*** ../vim-8.0.1311/src/menu.c	2017-09-23 23:58:21.188315512 +0200
--- src/menu.c	2017-11-18 20:40:56.079128920 +0100
***************
*** 815,821 ****
  	    }
  	}
  #if defined(FEAT_TOOLBAR) && !defined(FEAT_GUI_W32) \
! 	&& (defined(FEAT_BEVAL) || defined(FEAT_GUI_GTK))
  	/* Need to update the menu tip. */
  	if (modes & MENU_TIP_MODE)
  	    gui_mch_menu_set_tip(menu);
--- 815,821 ----
  	    }
  	}
  #if defined(FEAT_TOOLBAR) && !defined(FEAT_GUI_W32) \
! 	&& (defined(FEAT_BEVAL_GUI) || defined(FEAT_GUI_GTK))
  	/* Need to update the menu tip. */
  	if (modes & MENU_TIP_MODE)
  	    gui_mch_menu_set_tip(menu);
***************
*** 1010,1016 ****
  	{
  	    free_menu_string(menu, MENU_INDEX_TIP);
  #if defined(FEAT_TOOLBAR) && !defined(FEAT_GUI_W32) \
! 	    && (defined(FEAT_BEVAL) || defined(FEAT_GUI_GTK))
  	    /* Need to update the menu tip. */
  	    if (gui.in_use)
  		gui_mch_menu_set_tip(menu);
--- 1010,1016 ----
  	{
  	    free_menu_string(menu, MENU_INDEX_TIP);
  #if defined(FEAT_TOOLBAR) && !defined(FEAT_GUI_W32) \
! 	    && (defined(FEAT_BEVAL_GUI) || defined(FEAT_GUI_GTK))
  	    /* Need to update the menu tip. */
  	    if (gui.in_use)
  		gui_mch_menu_set_tip(menu);
*** ../vim-8.0.1311/src/netbeans.c	2017-09-22 14:35:46.592623416 +0200
--- src/netbeans.c	2017-11-18 21:44:20.864739102 +0100
***************
*** 107,113 ****
  	nb_channel = NULL;
      }
  
! #ifdef FEAT_BEVAL
      bevalServers &= ~BEVAL_NETBEANS;
  #endif
  
--- 107,113 ----
  	nb_channel = NULL;
      }
  
! #ifdef FEAT_BEVAL_GUI
      bevalServers &= ~BEVAL_NETBEANS;
  #endif
  
***************
*** 220,226 ****
  	if (nb_channel != NULL)
  	{
  	    /* success */
! # ifdef FEAT_BEVAL
  	    bevalServers |= BEVAL_NETBEANS;
  # endif
  
--- 220,226 ----
  	if (nb_channel != NULL)
  	{
  	    /* success */
! # ifdef FEAT_BEVAL_GUI
  	    bevalServers |= BEVAL_NETBEANS;
  # endif
  
***************
*** 1788,1794 ****
  	}
  	else if (streq((char *)cmd, "showBalloon"))
  	{
! #if defined(FEAT_BEVAL)
  	    static char	*text = NULL;
  
  	    /*
--- 1788,1794 ----
  	}
  	else if (streq((char *)cmd, "showBalloon"))
  	{
! #if defined(FEAT_BEVAL_GUI)
  	    static char	*text = NULL;
  
  	    /*
***************
*** 2506,2512 ****
  
      /* Don't do anything when 'ballooneval' is off, messages scrolled the
       * windows up or we have no connection. */
!     if (!p_beval || msg_scrolled > 0 || !NETBEANS_OPEN)
  	return;
  
      if (get_beval_info(beval, TRUE, &wp, &lnum, &text, &col) == OK)
--- 2506,2512 ----
  
      /* Don't do anything when 'ballooneval' is off, messages scrolled the
       * windows up or we have no connection. */
!     if (!can_use_beval() || !NETBEANS_OPEN)
  	return;
  
      if (get_beval_info(beval, TRUE, &wp, &lnum, &text, &col) == OK)
*** ../vim-8.0.1311/src/option.c	2017-11-18 18:51:08.113770879 +0100
--- src/option.c	2017-11-18 20:51:56.832359620 +0100
***************
*** 634,640 ****
  #endif
  			    SCRIPTID_INIT},
      {"ballooneval", "beval",P_BOOL|P_VI_DEF|P_NO_MKRC,
! #ifdef FEAT_BEVAL
  			    (char_u *)&p_beval, PV_NONE,
  			    {(char_u *)FALSE, (char_u *)0L}
  #else
--- 634,640 ----
  #endif
  			    SCRIPTID_INIT},
      {"ballooneval", "beval",P_BOOL|P_VI_DEF|P_NO_MKRC,
! #ifdef FEAT_BEVAL_GUI
  			    (char_u *)&p_beval, PV_NONE,
  			    {(char_u *)FALSE, (char_u *)0L}
  #else
***************
*** 643,649 ****
  #endif
  			    SCRIPTID_INIT},
      {"balloonevalterm", "bevalterm",P_BOOL|P_VI_DEF|P_NO_MKRC,
! #ifdef FEAT_BEVALTERM
  			    (char_u *)&p_bevalterm, PV_NONE,
  			    {(char_u *)FALSE, (char_u *)0L}
  #else
--- 643,649 ----
  #endif
  			    SCRIPTID_INIT},
      {"balloonevalterm", "bevalterm",P_BOOL|P_VI_DEF|P_NO_MKRC,
! #ifdef FEAT_BEVAL_TERM
  			    (char_u *)&p_bevalterm, PV_NONE,
  			    {(char_u *)FALSE, (char_u *)0L}
  #else
***************
*** 8429,8435 ****
  	p_wiv = (*T_XS != NUL);
      }
  
! #ifdef FEAT_BEVAL
      else if ((int *)varp == &p_beval)
      {
  	if (!balloonEvalForTerm)
--- 8429,8435 ----
  	p_wiv = (*T_XS != NUL);
      }
  
! #ifdef FEAT_BEVAL_GUI
      else if ((int *)varp == &p_beval)
      {
  	if (!balloonEvalForTerm)
***************
*** 8441,8452 ****
  	}
      }
  #endif
! # ifdef FEAT_BEVALTERM
      else if ((int *)varp == &p_bevalterm)
      {
  	mch_bevalterm_changed();
      }
! # endif
  
  #ifdef FEAT_AUTOCHDIR
      else if ((int *)varp == &p_acd)
--- 8441,8452 ----
  	}
      }
  #endif
! #ifdef FEAT_BEVAL_TERM
      else if ((int *)varp == &p_bevalterm)
      {
  	mch_bevalterm_changed();
      }
! #endif
  
  #ifdef FEAT_AUTOCHDIR
      else if ((int *)varp == &p_acd)
*** ../vim-8.0.1311/src/os_unix.c	2017-11-18 18:51:08.117770819 +0100
--- src/os_unix.c	2017-11-18 20:52:25.019916475 +0100
***************
*** 475,481 ****
  	if ((wait_time < 0 || wait_time > 100L) && channel_any_readahead())
  	    wait_time = 10L;
  #endif
! #ifdef FEAT_BEVAL
  	if (p_beval && wait_time > 100L)
  	    /* The 'balloonexpr' may indirectly invoke a callback while waiting
  	     * for a character, need to check often. */
--- 475,481 ----
  	if ((wait_time < 0 || wait_time > 100L) && channel_any_readahead())
  	    wait_time = 10L;
  #endif
! #ifdef FEAT_BEVAL_GUI
  	if (p_beval && wait_time > 100L)
  	    /* The 'balloonexpr' may indirectly invoke a callback while waiting
  	     * for a character, need to check often. */
***************
*** 3572,3584 ****
      void
  mch_setmouse(int on)
  {
! # ifdef FEAT_BEVALTERM
      static int	bevalterm_ison = FALSE;
  # endif
      int		xterm_mouse_vers;
  
      if (on == mouse_ison
! # ifdef FEAT_BEVALTERM
  	    && p_bevalterm == bevalterm_ison
  # endif
  	    )
--- 3572,3584 ----
      void
  mch_setmouse(int on)
  {
! # ifdef FEAT_BEVAL_TERM
      static int	bevalterm_ison = FALSE;
  # endif
      int		xterm_mouse_vers;
  
      if (on == mouse_ison
! # ifdef FEAT_BEVAL_TERM
  	    && p_bevalterm == bevalterm_ison
  # endif
  	    )
***************
*** 3610,3616 ****
      }
  # endif
  
! # ifdef FEAT_BEVALTERM
      if (bevalterm_ison != (p_bevalterm && on))
      {
  	bevalterm_ison = (p_bevalterm && on);
--- 3610,3616 ----
      }
  # endif
  
! # ifdef FEAT_BEVAL_TERM
      if (bevalterm_ison != (p_bevalterm && on))
      {
  	bevalterm_ison = (p_bevalterm && on);
***************
*** 3627,3633 ****
  	    out_str_nf((char_u *)
  		       (xterm_mouse_vers > 1
  			? (
! # ifdef FEAT_BEVALTERM
  			    bevalterm_ison
  			       ? IF_EB("\033[?1003h", ESC_STR "[?1003h") :
  # endif
--- 3627,3633 ----
  	    out_str_nf((char_u *)
  		       (xterm_mouse_vers > 1
  			? (
! # ifdef FEAT_BEVAL_TERM
  			    bevalterm_ison
  			       ? IF_EB("\033[?1003h", ESC_STR "[?1003h") :
  # endif
***************
*** 3735,3741 ****
  # endif
  }
  
! #if defined(FEAT_BEVALTERM) || defined(PROTO)
  /*
   * Called when 'balloonevalterm' changed.
   */
--- 3735,3741 ----
  # endif
  }
  
! #if defined(FEAT_BEVAL_TERM) || defined(PROTO)
  /*
   * Called when 'balloonevalterm' changed.
   */
*** ../vim-8.0.1311/src/os_win32.c	2017-10-30 21:56:18.619439283 +0100
--- src/os_win32.c	2017-11-18 20:43:53.256153429 +0100
***************
*** 1469,1475 ****
  		    dwWaitTime = 10;
  	    }
  #endif
! #ifdef FEAT_BEVAL
  	    if (p_beval && dwWaitTime > 100)
  		/* The 'balloonexpr' may indirectly invoke a callback while
  		 * waiting for a character, need to check often. */
--- 1469,1475 ----
  		    dwWaitTime = 10;
  	    }
  #endif
! #ifdef FEAT_BEVAL_GUI
  	    if (p_beval && dwWaitTime > 100)
  		/* The 'balloonexpr' may indirectly invoke a callback while
  		 * waiting for a character, need to check often. */
*** ../vim-8.0.1311/src/syntax.c	2017-10-04 19:34:58.171740373 +0200
--- src/syntax.c	2017-11-18 20:45:12.250847727 +0100
***************
*** 7561,7567 ****
  	    if (gui.in_use)
  	    {
  		gui_new_scrollbar_colors();
! #  ifdef FEAT_BEVAL
  		gui_mch_new_tooltip_colors();
  #  endif
  #  ifdef FEAT_MENU
--- 7561,7567 ----
  	    if (gui.in_use)
  	    {
  		gui_new_scrollbar_colors();
! #  ifdef FEAT_BEVAL_GUI
  		gui_mch_new_tooltip_colors();
  #  endif
  #  ifdef FEAT_MENU
***************
*** 8015,8021 ****
  			gui.scroll_fg_pixel = i;
  			do_colors = TRUE;
  		    }
! #   ifdef FEAT_BEVAL
  		    if (is_tooltip_group && gui.tooltip_fg_pixel != i)
  		    {
  			gui.tooltip_fg_pixel = i;
--- 8015,8021 ----
  			gui.scroll_fg_pixel = i;
  			do_colors = TRUE;
  		    }
! #   ifdef FEAT_BEVAL_GUI
  		    if (is_tooltip_group && gui.tooltip_fg_pixel != i)
  		    {
  			gui.tooltip_fg_pixel = i;
***************
*** 8066,8072 ****
  			gui.scroll_bg_pixel = i;
  			do_colors = TRUE;
  		    }
! #   ifdef FEAT_BEVAL
  		    if (is_tooltip_group && gui.tooltip_bg_pixel != i)
  		    {
  			gui.tooltip_bg_pixel = i;
--- 8066,8072 ----
  			gui.scroll_bg_pixel = i;
  			do_colors = TRUE;
  		    }
! #   ifdef FEAT_BEVAL_GUI
  		    if (is_tooltip_group && gui.tooltip_bg_pixel != i)
  		    {
  			gui.tooltip_bg_pixel = i;
***************
*** 8252,8258 ****
  	    if (gui.in_use && do_colors)
  		gui_new_scrollbar_colors();
  	}
! # ifdef FEAT_BEVAL
  	else if (is_tooltip_group)
  	{
  	    if (gui.in_use && do_colors)
--- 8252,8258 ----
  	    if (gui.in_use && do_colors)
  		gui_new_scrollbar_colors();
  	}
! # ifdef FEAT_BEVAL_GUI
  	else if (is_tooltip_group)
  	{
  	    if (gui.in_use && do_colors)
***************
*** 8431,8437 ****
  #  endif
  	    must_redraw = CLEAR;
  	}
! #  ifdef FEAT_BEVAL
  	if (set_group_colors((char_u *)"Tooltip",
  			     &gui.tooltip_fg_pixel, &gui.tooltip_bg_pixel,
  			     FALSE, FALSE, TRUE))
--- 8431,8437 ----
  #  endif
  	    must_redraw = CLEAR;
  	}
! #  ifdef FEAT_BEVAL_GUI
  	if (set_group_colors((char_u *)"Tooltip",
  			     &gui.tooltip_fg_pixel, &gui.tooltip_bg_pixel,
  			     FALSE, FALSE, TRUE))
***************
*** 8673,8679 ****
  #    endif
  	    gui_mch_new_menu_font();
  	}
! #    ifdef FEAT_BEVAL
  	if (do_tooltip)
  	{
  	    /* The Athena widget set cannot currently handle switching between
--- 8673,8679 ----
  #    endif
  	    gui_mch_new_menu_font();
  	}
! #    ifdef FEAT_BEVAL_GUI
  	if (do_tooltip)
  	{
  	    /* The Athena widget set cannot currently handle switching between
*** ../vim-8.0.1311/src/version.c	2017-11-18 20:31:57.539138174 +0100
--- src/version.c	2017-11-18 22:05:56.616505559 +0100
***************
*** 88,99 ****
  #else
  	"-autoservername",
  #endif
! #ifdef FEAT_BEVAL
  	"+balloon_eval",
  #else
  	"-balloon_eval",
  #endif
! #ifdef FEAT_BEVALTERM
  	"+balloon_eval_term",
  #else
  	"-balloon_eval_term",
--- 88,99 ----
  #else
  	"-autoservername",
  #endif
! #ifdef FEAT_BEVAL_GUI
  	"+balloon_eval",
  #else
  	"-balloon_eval",
  #endif
! #ifdef FEAT_BEVAL_TERM
  	"+balloon_eval_term",
  #else
  	"-balloon_eval_term",
*** ../vim-8.0.1311/src/gui.h	2017-09-16 20:54:47.082560506 +0200
--- src/gui.h	2017-11-18 21:10:59.986762647 +0100
***************
*** 16,25 ****
  # include <X11/StringDefs.h>
  #endif
  
- #if defined(FEAT_BEVAL) || defined(PROTO)
- # include "gui_beval.h"
- #endif
- 
  #ifdef FEAT_GUI_GTK
  # ifdef VMS /* undef MIN and MAX because Intrinsic.h redefines them anyway */
  #  ifdef MAX
--- 16,21 ----
*** ../vim-8.0.1311/src/gui_beval.h	2016-08-29 22:42:20.000000000 +0200
--- src/gui_beval.h	1970-01-01 01:00:00.000000000 +0100
***************
*** 1,80 ****
- /* vi:set ts=8 sts=4 sw=4 noet:
-  *
-  * VIM - Vi IMproved	by Bram Moolenaar
-  *			Visual Workshop integration by Gordon Prieur
-  *
-  * Do ":help uganda"  in Vim to read copying and usage conditions.
-  * Do ":help credits" in Vim to see a list of people who contributed.
-  */
- 
- #if !defined(GUI_BEVAL_H) && (defined(FEAT_BEVAL) || defined(PROTO))
- #define GUI_BEVAL_H
- 
- #ifdef FEAT_GUI_GTK
- # ifdef USE_GTK3
- #  include <gtk/gtk.h>
- # else
- #  include <gtk/gtkwidget.h>
- # endif
- #else
- # if defined(FEAT_GUI_X11)
- #  include <X11/Intrinsic.h>
- # endif
- #endif
- 
- typedef enum
- {
-     ShS_NEUTRAL,			/* nothing showing or pending */
-     ShS_PENDING,			/* data requested from debugger */
-     ShS_UPDATE_PENDING,			/* switching information displayed */
-     ShS_SHOWING				/* the balloon is being displayed */
- } BeState;
- 
- typedef struct BalloonEvalStruct
- {
- #ifdef FEAT_GUI_GTK
-     GtkWidget		*target;	/* widget we are monitoring */
-     GtkWidget		*balloonShell;
-     GtkWidget		*balloonLabel;
-     unsigned int	timerID;	/* timer for run */
-     BeState		showState;	/* tells us whats currently going on */
-     int			x;
-     int			y;
-     unsigned int	state;		/* Button/Modifier key state */
- #else
- # if !defined(FEAT_GUI_W32)
-     Widget		target;		/* widget we are monitoring */
-     Widget		balloonShell;
-     Widget		balloonLabel;
-     XtIntervalId	timerID;	/* timer for run */
-     BeState		showState;	/* tells us whats currently going on */
-     XtAppContext	appContext;	/* used in event handler */
-     Position		x;
-     Position		y;
-     Position		x_root;
-     Position		y_root;
-     int			state;		/* Button/Modifier key state */
- # else
-     HWND		target;
-     HWND		balloon;
-     int			x;
-     int			y;
-     BeState		showState;	/* tells us whats currently going on */
- # endif
- #endif
-     int			ts;		/* tabstop setting for this buffer */
-     char_u		*msg;
-     void		(*msgCB)(struct BalloonEvalStruct *, int);
-     void		*clientData;	/* For callback */
- #if !defined(FEAT_GUI_GTK) && !defined(FEAT_GUI_W32)
-     Dimension		screen_width;	/* screen width in pixels */
-     Dimension		screen_height;	/* screen height in pixels */
- #endif
- } BalloonEval;
- 
- #define EVAL_OFFSET_X 15 /* displacement of beval topleft corner from pointer */
- #define EVAL_OFFSET_Y 10
- 
- #include "gui_beval.pro"
- 
- #endif /* GUI_BEVAL_H and FEAT_BEVAL */
--- 0 ----
*** ../vim-8.0.1311/src/vim.h	2017-11-18 20:22:20.123682143 +0100
--- src/vim.h	2017-11-18 21:09:33.136085512 +0100
***************
*** 1816,1821 ****
--- 1816,1822 ----
  #include "structs.h"	    /* file that defines many structures */
  
  #include "alloc.h"
+ #include "beval.h"
  
  /* Values for "do_profiling". */
  #define PROF_NONE	0	/* profiling not started */
*** ../vim-8.0.1311/src/beval.h	2017-11-18 22:09:42.749016717 +0100
--- src/beval.h	2017-11-18 20:58:19.666399862 +0100
***************
*** 0 ****
--- 1,83 ----
+ /* vi:set ts=8 sts=4 sw=4 noet:
+  *
+  * VIM - Vi IMproved	by Bram Moolenaar
+  *			Visual Workshop integration by Gordon Prieur
+  *
+  * Do ":help uganda"  in Vim to read copying and usage conditions.
+  * Do ":help credits" in Vim to see a list of people who contributed.
+  */
+ 
+ #if !defined(BEVAL__H) && (defined(FEAT_BEVAL) || defined(PROTO))
+ #define BEVAL__H
+ 
+ #ifdef FEAT_GUI_GTK
+ # ifdef USE_GTK3
+ #  include <gtk/gtk.h>
+ # else
+ #  include <gtk/gtkwidget.h>
+ # endif
+ #else
+ # if defined(FEAT_GUI_X11)
+ #  include <X11/Intrinsic.h>
+ # endif
+ #endif
+ 
+ typedef enum
+ {
+     ShS_NEUTRAL,			/* nothing showing or pending */
+     ShS_PENDING,			/* data requested from debugger */
+     ShS_UPDATE_PENDING,			/* switching information displayed */
+     ShS_SHOWING				/* the balloon is being displayed */
+ } BeState;
+ 
+ typedef struct BalloonEvalStruct
+ {
+ #ifdef FEAT_GUI_GTK
+     GtkWidget		*target;	/* widget we are monitoring */
+     GtkWidget		*balloonShell;
+     GtkWidget		*balloonLabel;
+     unsigned int	timerID;	/* timer for run */
+     BeState		showState;	/* tells us whats currently going on */
+     int			x;
+     int			y;
+     unsigned int	state;		/* Button/Modifier key state */
+ #else
+ # if !defined(FEAT_GUI_W32)
+     Widget		target;		/* widget we are monitoring */
+     Widget		balloonShell;
+     Widget		balloonLabel;
+     XtIntervalId	timerID;	/* timer for run */
+     BeState		showState;	/* tells us whats currently going on */
+     XtAppContext	appContext;	/* used in event handler */
+     Position		x;
+     Position		y;
+     Position		x_root;
+     Position		y_root;
+     int			state;		/* Button/Modifier key state */
+ # else
+     HWND		target;
+     HWND		balloon;
+     int			x;
+     int			y;
+     BeState		showState;	/* tells us whats currently going on */
+ # endif
+ #endif
+     int			ts;		/* tabstop setting for this buffer */
+     char_u		*msg;
+     void		(*msgCB)(struct BalloonEvalStruct *, int);
+     void		*clientData;	/* For callback */
+ #if !defined(FEAT_GUI_GTK) && !defined(FEAT_GUI_W32)
+     Dimension		screen_width;	/* screen width in pixels */
+     Dimension		screen_height;	/* screen height in pixels */
+ #endif
+ } BalloonEval;
+ 
+ #define EVAL_OFFSET_X 15 /* displacement of beval topleft corner from pointer */
+ #define EVAL_OFFSET_Y 10
+ 
+ #include "beval.pro"
+ #ifdef FEAT_BEVAL_GUI
+ # include "gui_beval.pro"
+ #endif
+ 
+ #endif /* BEVAL__H and FEAT_BEVAL_GUI */
*** ../vim-8.0.1311/src/option.h	2017-11-18 18:51:08.113770879 +0100
--- src/option.h	2017-11-18 20:54:11.854244162 +0100
***************
*** 376,390 ****
  EXTERN char_u	*p_cm;		/* 'cryptmethod' */
  #endif
  #ifdef FEAT_BEVAL
! EXTERN long	p_bdlay;	/* 'balloondelay' */
  EXTERN int	p_beval;	/* 'ballooneval' */
  # ifdef FEAT_EVAL
  EXTERN char_u	*p_bexpr;
  # endif
! #endif
! # ifdef FEAT_BEVALTERM
  EXTERN int	p_bevalterm;	/* 'balloonevalterm' */
  # endif
  #ifdef FEAT_BROWSE
  EXTERN char_u	*p_bsdir;	/* 'browsedir' */
  #endif
--- 376,392 ----
  EXTERN char_u	*p_cm;		/* 'cryptmethod' */
  #endif
  #ifdef FEAT_BEVAL
! # ifdef FEAT_BEVAL_GUI
  EXTERN int	p_beval;	/* 'ballooneval' */
+ # endif
+ EXTERN long	p_bdlay;	/* 'balloondelay' */
  # ifdef FEAT_EVAL
  EXTERN char_u	*p_bexpr;
  # endif
! # ifdef FEAT_BEVAL_TERM
  EXTERN int	p_bevalterm;	/* 'balloonevalterm' */
  # endif
+ #endif
  #ifdef FEAT_BROWSE
  EXTERN char_u	*p_bsdir;	/* 'browsedir' */
  #endif
*** ../vim-8.0.1311/src/ex_cmds2.c	2017-11-18 18:51:08.125770701 +0100
--- src/ex_cmds2.c	2017-11-18 20:50:48.409439116 +0100
***************
*** 1291,1297 ****
      if (did_one)
  	redraw_after_callback(need_update_screen);
  
! #ifdef FEAT_BEVALTERM
      if (bevalexpr_due_set)
      {
  	this_due = proftime_time_left(&bevalexpr_due, &now);
--- 1291,1297 ----
      if (did_one)
  	redraw_after_callback(need_update_screen);
  
! #ifdef FEAT_BEVAL_TERM
      if (bevalexpr_due_set)
      {
  	this_due = proftime_time_left(&bevalexpr_due, &now);
*** ../vim-8.0.1311/src/ui.c	2017-11-12 16:56:07.286277099 +0100
--- src/ui.c	2017-11-18 21:36:04.988217363 +0100
***************
*** 3208,3214 ****
--- 3208,3218 ----
  #endif
      return IN_BUFFER;
  }
+ #endif
  
+ #if defined(FEAT_GUI_MOTIF) || defined(FEAT_GUI_GTK) || defined(FEAT_GUI_MAC) \
+ 	|| defined(FEAT_GUI_ATHENA) || defined(FEAT_GUI_MSWIN) \
+ 	|| defined(FEAT_GUI_PHOTON) || defined(FEAT_BEVAL) || defined(PROTO)
  /*
   * Convert a virtual (screen) column to a character column.
   * The first column is one.
*** ../vim-8.0.1311/src/getchar.c	2017-11-18 18:51:08.125770701 +0100
--- src/getchar.c	2017-11-18 20:51:07.405138858 +0100
***************
*** 1792,1798 ****
       */
      may_garbage_collect = FALSE;
  #endif
! #ifdef FEAT_BEVALTERM
      if (c != K_MOUSEMOVE && c != K_IGNORE)
      {
  	/* Don't trigger 'balloonexpr' unless only the mouse was moved. */
--- 1792,1798 ----
       */
      may_garbage_collect = FALSE;
  #endif
! #ifdef FEAT_BEVAL_TERM
      if (c != K_MOUSEMOVE && c != K_IGNORE)
      {
  	/* Don't trigger 'balloonexpr' unless only the mouse was moved. */
*** ../vim-8.0.1311/src/normal.c	2017-11-18 18:51:08.125770701 +0100
--- src/normal.c	2017-11-18 20:51:33.584725771 +0100
***************
*** 2400,2406 ****
      if (c == K_MOUSEMOVE)
      {
  	/* Mouse moved without a button pressed. */
! #ifdef FEAT_BEVALTERM
  	ui_may_remove_balloon();
  	if (p_bevalterm && !VIsual_active)
  	{
--- 2400,2406 ----
      if (c == K_MOUSEMOVE)
      {
  	/* Mouse moved without a button pressed. */
! #ifdef FEAT_BEVAL_TERM
  	ui_may_remove_balloon();
  	if (p_bevalterm && !VIsual_active)
  	{
*** ../vim-8.0.1311/src/popupmnu.c	2017-11-18 18:51:08.129770641 +0100
--- src/popupmnu.c	2017-11-18 20:52:46.695576280 +0100
***************
*** 760,766 ****
      return pum_height;
  }
  
! # if defined(FEAT_BEVALTERM) || defined(PROTO)
  static pumitem_T *balloon_array = NULL;
  static int balloon_arraysize;
  static int balloon_mouse_row = 0;
--- 760,766 ----
      return pum_height;
  }
  
! # if defined(FEAT_BEVAL_TERM) || defined(PROTO)
  static pumitem_T *balloon_array = NULL;
  static int balloon_arraysize;
  static int balloon_mouse_row = 0;
*** ../vim-8.0.1311/src/globals.h	2017-11-18 18:51:08.129770641 +0100
--- src/globals.h	2017-11-18 20:53:28.706918259 +0100
***************
*** 1649,1655 ****
  EXTERN int  timer_busy INIT(= 0);   /* when timer is inside vgetc() then > 0 */
  #endif
  
! #ifdef FEAT_BEVALTERM
  EXTERN int  bevalexpr_due_set INIT(= FALSE);
  EXTERN proftime_T bevalexpr_due;
  #endif
--- 1649,1655 ----
  EXTERN int  timer_busy INIT(= 0);   /* when timer is inside vgetc() then > 0 */
  #endif
  
! #ifdef FEAT_BEVAL_TERM
  EXTERN int  bevalexpr_due_set INIT(= FALSE);
  EXTERN proftime_T bevalexpr_due;
  #endif
*** ../vim-8.0.1311/src/Makefile	2017-11-16 21:52:07.651021800 +0100
--- src/Makefile	2017-11-18 21:59:23.554611479 +0100
***************
*** 1529,1534 ****
--- 1533,1539 ----
  
  BASIC_SRC = \
  	arabic.c \
+ 	beval.c \
  	blowfish.c \
  	buffer.c \
  	charset.c \
***************
*** 1641,1646 ****
--- 1646,1652 ----
  
  OBJ_COMMON = \
  	objects/arabic.o \
+ 	objects/beval.o \
  	objects/buffer.o \
  	objects/blowfish.o \
  	objects/crypt.o \
***************
*** 1829,1834 ****
--- 1835,1841 ----
  	userfunc.pro \
  	version.pro \
  	window.pro \
+ 	beval.pro \
  	gui_beval.pro \
  	workshop.pro \
  	netbeans.pro \
***************
*** 3088,3093 ****
--- 3095,3103 ----
  objects/gui_athena.o: gui_athena.c
  	$(CCC) -o $@ gui_athena.c
  
+ objects/beval.o: beval.c
+ 	$(CCC) -o $@ beval.c
+ 
  objects/gui_beval.o: gui_beval.c
  	$(CCC) -o $@ gui_beval.c
  
***************
*** 3432,3686 ****
  ### Dependencies:
  objects/arabic.o: arabic.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/blowfish.o: blowfish.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/buffer.o: buffer.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h version.h
  objects/charset.o: charset.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/crypt.o: crypt.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/crypt_zip.o: crypt_zip.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/dict.o: dict.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/diff.o: diff.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/digraph.o: digraph.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/edit.o: edit.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/eval.o: eval.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h version.h
  objects/evalfunc.o: evalfunc.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h version.h
  objects/ex_cmds.o: ex_cmds.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h version.h
  objects/ex_cmds2.o: ex_cmds2.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h version.h
  objects/ex_docmd.o: ex_docmd.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h ex_cmdidxs.h
  objects/ex_eval.o: ex_eval.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/ex_getln.o: ex_getln.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/farsi.o: farsi.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/fileio.o: fileio.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/fold.o: fold.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/getchar.o: getchar.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/hardcopy.o: hardcopy.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h version.h
  objects/hashtab.o: hashtab.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/if_cscope.o: if_cscope.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h if_cscope.h
  objects/if_xcmdsrv.o: if_xcmdsrv.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h version.h
  objects/json.o: json.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/list.o: list.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/main.o: main.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/mark.o: mark.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/memfile.o: memfile.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/memline.o: memline.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/menu.o: menu.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/message.o: message.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/misc1.o: misc1.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h version.h
  objects/misc2.o: misc2.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/move.o: move.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/mbyte.o: mbyte.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/normal.o: normal.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/ops.o: ops.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h ascii.h \
!  keymap.h term.h macros.h option.h structs.h regexp.h gui.h gui_beval.h \
   proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h globals.h farsi.h \
   arabic.h
  objects/option.o: option.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/os_unix.o: os_unix.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h os_unixx.h
  objects/pathdef.o: auto/pathdef.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/popupmnu.o: popupmnu.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/quickfix.o: quickfix.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/regexp.o: regexp.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h regexp_nfa.c
  objects/screen.o: screen.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/search.o: search.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/sha256.o: sha256.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/spell.o: spell.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/spellfile.o: spellfile.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/syntax.o: syntax.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/tag.o: tag.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h ascii.h \
!  keymap.h term.h macros.h option.h structs.h regexp.h gui.h gui_beval.h \
   proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h globals.h farsi.h \
   arabic.h
  objects/term.o: term.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/terminal.o: terminal.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/ui.o: ui.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h ascii.h \
!  keymap.h term.h macros.h option.h structs.h regexp.h gui.h gui_beval.h \
   proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h globals.h farsi.h \
   arabic.h
  objects/undo.o: undo.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/userfunc.o: userfunc.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/version.o: version.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h version.h
  objects/window.o: window.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/gui.o: gui.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h ascii.h \
!  keymap.h term.h macros.h option.h structs.h regexp.h gui.h gui_beval.h \
   proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h globals.h farsi.h \
   arabic.h
  objects/gui_gtk.o: gui_gtk.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h gui_gtk_f.h
  objects/gui_gtk_f.o: gui_gtk_f.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h gui_gtk_f.h
  objects/gui_motif.o: gui_motif.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h gui_xmebw.h ../pixmaps/alert.xpm \
   ../pixmaps/error.xpm ../pixmaps/generic.xpm ../pixmaps/info.xpm \
   ../pixmaps/quest.xpm gui_x11_pm.h ../pixmaps/tb_new.xpm \
--- 3442,3696 ----
  ### Dependencies:
  objects/arabic.o: arabic.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/blowfish.o: blowfish.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/buffer.o: buffer.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h version.h
  objects/charset.o: charset.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/crypt.o: crypt.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/crypt_zip.o: crypt_zip.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/dict.o: dict.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/diff.o: diff.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/digraph.o: digraph.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/edit.o: edit.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/eval.o: eval.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h version.h
  objects/evalfunc.o: evalfunc.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h version.h
  objects/ex_cmds.o: ex_cmds.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h version.h
  objects/ex_cmds2.o: ex_cmds2.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h version.h
  objects/ex_docmd.o: ex_docmd.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h ex_cmdidxs.h
  objects/ex_eval.o: ex_eval.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/ex_getln.o: ex_getln.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/farsi.o: farsi.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/fileio.o: fileio.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/fold.o: fold.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/getchar.o: getchar.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/hardcopy.o: hardcopy.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h version.h
  objects/hashtab.o: hashtab.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/if_cscope.o: if_cscope.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h if_cscope.h
  objects/if_xcmdsrv.o: if_xcmdsrv.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h version.h
  objects/json.o: json.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/list.o: list.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/main.o: main.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/mark.o: mark.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/memfile.o: memfile.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/memline.o: memline.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/menu.o: menu.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/message.o: message.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/misc1.o: misc1.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h version.h
  objects/misc2.o: misc2.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/move.o: move.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/mbyte.o: mbyte.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/normal.o: normal.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/ops.o: ops.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h ascii.h \
!  keymap.h term.h macros.h option.h structs.h regexp.h gui.h beval.h \
   proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h globals.h farsi.h \
   arabic.h
  objects/option.o: option.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/os_unix.o: os_unix.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h os_unixx.h
  objects/pathdef.o: auto/pathdef.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/popupmnu.o: popupmnu.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/quickfix.o: quickfix.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/regexp.o: regexp.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h regexp_nfa.c
  objects/screen.o: screen.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/search.o: search.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/sha256.o: sha256.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/spell.o: spell.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/spellfile.o: spellfile.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/syntax.o: syntax.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/tag.o: tag.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h ascii.h \
!  keymap.h term.h macros.h option.h structs.h regexp.h gui.h beval.h \
   proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h globals.h farsi.h \
   arabic.h
  objects/term.o: term.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/terminal.o: terminal.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/ui.o: ui.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h ascii.h \
!  keymap.h term.h macros.h option.h structs.h regexp.h gui.h beval.h \
   proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h globals.h farsi.h \
   arabic.h
  objects/undo.o: undo.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/userfunc.o: userfunc.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/version.o: version.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h version.h
  objects/window.o: window.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/gui.o: gui.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h ascii.h \
!  keymap.h term.h macros.h option.h structs.h regexp.h gui.h beval.h \
   proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h globals.h farsi.h \
   arabic.h
  objects/gui_gtk.o: gui_gtk.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h gui_gtk_f.h
  objects/gui_gtk_f.o: gui_gtk_f.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h gui_gtk_f.h
  objects/gui_motif.o: gui_motif.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h gui_xmebw.h ../pixmaps/alert.xpm \
   ../pixmaps/error.xpm ../pixmaps/generic.xpm ../pixmaps/info.xpm \
   ../pixmaps/quest.xpm gui_x11_pm.h ../pixmaps/tb_new.xpm \
***************
*** 3701,3715 ****
   ../pixmaps/tb_minwidth.xpm
  objects/gui_xmdlg.o: gui_xmdlg.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/gui_xmebw.o: gui_xmebw.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h gui_xmebwp.h gui_xmebw.h
  objects/gui_athena.o: gui_athena.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h gui_at_sb.h gui_x11_pm.h \
   ../pixmaps/tb_new.xpm ../pixmaps/tb_open.xpm ../pixmaps/tb_close.xpm \
   ../pixmaps/tb_save.xpm ../pixmaps/tb_print.xpm ../pixmaps/tb_cut.xpm \
--- 3711,3725 ----
   ../pixmaps/tb_minwidth.xpm
  objects/gui_xmdlg.o: gui_xmdlg.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/gui_xmebw.o: gui_xmebw.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h gui_xmebwp.h gui_xmebw.h
  objects/gui_athena.o: gui_athena.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h gui_at_sb.h gui_x11_pm.h \
   ../pixmaps/tb_new.xpm ../pixmaps/tb_open.xpm ../pixmaps/tb_close.xpm \
   ../pixmaps/tb_save.xpm ../pixmaps/tb_print.xpm ../pixmaps/tb_cut.xpm \
***************
*** 3728,3825 ****
   ../pixmaps/tb_minwidth.xpm
  objects/gui_gtk_x11.o: gui_gtk_x11.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h auto/gui_gtk_gresources.h gui_gtk_f.h \
   ../runtime/vim32x32.xpm ../runtime/vim16x16.xpm ../runtime/vim48x48.xpm
  objects/gui_x11.o: gui_x11.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h ../runtime/vim32x32.xpm \
   ../runtime/vim16x16.xpm ../runtime/vim48x48.xpm
  objects/gui_at_sb.o: gui_at_sb.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h gui_at_sb.h
  objects/gui_at_fs.o: gui_at_fs.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h gui_at_sb.h
  objects/pty.o: pty.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h ascii.h \
!  keymap.h term.h macros.h option.h structs.h regexp.h gui.h gui_beval.h \
   proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h globals.h farsi.h \
   arabic.h
  objects/json_test.o: json_test.c main.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h json.c
  objects/kword_test.o: kword_test.c main.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h charset.c
  objects/memfile_test.o: memfile_test.c main.c vim.h auto/config.h feature.h \
   os_unix.h auto/osdef.h ascii.h keymap.h term.h macros.h option.h \
!  structs.h regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h \
   ex_cmds.h spell.h proto.h globals.h farsi.h arabic.h memfile.c
  objects/message_test.o: message_test.c main.c vim.h auto/config.h feature.h \
   os_unix.h auto/osdef.h ascii.h keymap.h term.h macros.h option.h \
!  structs.h regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h \
   ex_cmds.h spell.h proto.h globals.h farsi.h arabic.h message.c
  objects/hangulin.o: hangulin.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/if_lua.o: if_lua.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/if_mzsch.o: if_mzsch.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h if_mzsch.h
  objects/if_perl.o: auto/if_perl.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/if_perlsfio.o: if_perlsfio.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/if_python.o: if_python.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h if_py_both.h
  objects/if_python3.o: if_python3.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h if_py_both.h
  objects/if_tcl.o: if_tcl.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/if_ruby.o: if_ruby.c auto/config.h vim.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h version.h
  objects/gui_beval.o: gui_beval.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/workshop.o: workshop.c auto/config.h integration.h vim.h feature.h \
   os_unix.h auto/osdef.h ascii.h keymap.h term.h macros.h option.h \
!  structs.h regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h \
   ex_cmds.h spell.h proto.h globals.h farsi.h arabic.h version.h \
   workshop.h
  objects/wsdebug.o: wsdebug.c
  objects/integration.o: integration.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h integration.h
  objects/netbeans.o: netbeans.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h version.h
  objects/channel.o: channel.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/gui_gtk_gresources.o: auto/gui_gtk_gresources.c
--- 3738,3835 ----
   ../pixmaps/tb_minwidth.xpm
  objects/gui_gtk_x11.o: gui_gtk_x11.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h auto/gui_gtk_gresources.h gui_gtk_f.h \
   ../runtime/vim32x32.xpm ../runtime/vim16x16.xpm ../runtime/vim48x48.xpm
  objects/gui_x11.o: gui_x11.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h ../runtime/vim32x32.xpm \
   ../runtime/vim16x16.xpm ../runtime/vim48x48.xpm
  objects/gui_at_sb.o: gui_at_sb.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h gui_at_sb.h
  objects/gui_at_fs.o: gui_at_fs.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h gui_at_sb.h
  objects/pty.o: pty.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h ascii.h \
!  keymap.h term.h macros.h option.h structs.h regexp.h gui.h beval.h \
   proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h globals.h farsi.h \
   arabic.h
  objects/json_test.o: json_test.c main.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h json.c
  objects/kword_test.o: kword_test.c main.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h charset.c
  objects/memfile_test.o: memfile_test.c main.c vim.h auto/config.h feature.h \
   os_unix.h auto/osdef.h ascii.h keymap.h term.h macros.h option.h \
!  structs.h regexp.h gui.h beval.h proto/gui_beval.pro alloc.h \
   ex_cmds.h spell.h proto.h globals.h farsi.h arabic.h memfile.c
  objects/message_test.o: message_test.c main.c vim.h auto/config.h feature.h \
   os_unix.h auto/osdef.h ascii.h keymap.h term.h macros.h option.h \
!  structs.h regexp.h gui.h beval.h proto/gui_beval.pro alloc.h \
   ex_cmds.h spell.h proto.h globals.h farsi.h arabic.h message.c
  objects/hangulin.o: hangulin.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/if_lua.o: if_lua.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/if_mzsch.o: if_mzsch.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h if_mzsch.h
  objects/if_perl.o: auto/if_perl.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/if_perlsfio.o: if_perlsfio.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/if_python.o: if_python.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h if_py_both.h
  objects/if_python3.o: if_python3.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h if_py_both.h
  objects/if_tcl.o: if_tcl.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/if_ruby.o: if_ruby.c auto/config.h vim.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h version.h
  objects/gui_beval.o: gui_beval.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  objects/workshop.o: workshop.c auto/config.h integration.h vim.h feature.h \
   os_unix.h auto/osdef.h ascii.h keymap.h term.h macros.h option.h \
!  structs.h regexp.h gui.h beval.h proto/gui_beval.pro alloc.h \
   ex_cmds.h spell.h proto.h globals.h farsi.h arabic.h version.h \
   workshop.h
  objects/wsdebug.o: wsdebug.c
  objects/integration.o: integration.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h integration.h
  objects/netbeans.o: netbeans.c vim.h auto/config.h feature.h os_unix.h \
   auto/osdef.h ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h version.h
  objects/channel.o: channel.c vim.h auto/config.h feature.h os_unix.h auto/osdef.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h proto/gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  objects/gui_gtk_gresources.o: auto/gui_gtk_gresources.c
*** ../vim-8.0.1311/src/Make_cyg_ming.mak	2017-10-14 20:24:15.044417180 +0200
--- src/Make_cyg_ming.mak	2017-11-18 21:04:34.860638170 +0100
***************
*** 642,647 ****
--- 642,648 ----
  CUIOBJ = $(OUTDIR)/iscygpty.o
  OBJ = \
  	$(OUTDIR)/arabic.o \
+ 	$(OUTDIR)/beval.o \
  	$(OUTDIR)/blowfish.o \
  	$(OUTDIR)/buffer.o \
  	$(OUTDIR)/charset.o \
***************
*** 920,927 ****
  ###########################################################################
  INCL =	vim.h alloc.h arabic.h ascii.h ex_cmds.h farsi.h feature.h globals.h \
  	keymap.h macros.h option.h os_dos.h os_win32.h proto.h regexp.h \
! 	spell.h structs.h term.h $(NBDEBUG_INCL)
! GUI_INCL = gui.h gui_beval.h
  CUI_INCL = iscygpty.h
  
  $(OUTDIR)/if_python.o:	if_python.c if_py_both.h $(INCL)
--- 921,928 ----
  ###########################################################################
  INCL =	vim.h alloc.h arabic.h ascii.h ex_cmds.h farsi.h feature.h globals.h \
  	keymap.h macros.h option.h os_dos.h os_win32.h proto.h regexp.h \
! 	spell.h structs.h term.h beval.h $(NBDEBUG_INCL)
! GUI_INCL = gui.h
  CUI_INCL = iscygpty.h
  
  $(OUTDIR)/if_python.o:	if_python.c if_py_both.h $(INCL)
***************
*** 946,951 ****
--- 947,955 ----
  $(OUTDIR)/gui.o:	gui.c $(INCL) $(GUI_INCL)
  	$(CC) -c $(CFLAGS) gui.c -o $(OUTDIR)/gui.o
  
+ $(OUTDIR)/beval.o:	beval.c $(INCL) $(GUI_INCL)
+ 	$(CC) -c $(CFLAGS) beval.c -o $(OUTDIR)/beval.o
+ 
  $(OUTDIR)/gui_beval.o:	gui_beval.c $(INCL) $(GUI_INCL)
  	$(CC) -c $(CFLAGS) gui_beval.c -o $(OUTDIR)/gui_beval.o
  
*** ../vim-8.0.1311/src/Make_mvc.mak	2017-10-14 20:24:15.044417180 +0200
--- src/Make_mvc.mak	2017-11-18 21:06:00.799324647 +0100
***************
*** 683,692 ****
  
  INCL =	vim.h alloc.h arabic.h ascii.h ex_cmds.h farsi.h feature.h globals.h \
  	keymap.h macros.h option.h os_dos.h os_win32.h proto.h regexp.h \
! 	spell.h structs.h term.h $(NBDEBUG_INCL)
  
  OBJ = \
  	$(OUTDIR)\arabic.obj \
  	$(OUTDIR)\blowfish.obj \
  	$(OUTDIR)\buffer.obj \
  	$(OUTDIR)\charset.obj \
--- 683,693 ----
  
  INCL =	vim.h alloc.h arabic.h ascii.h ex_cmds.h farsi.h feature.h globals.h \
  	keymap.h macros.h option.h os_dos.h os_win32.h proto.h regexp.h \
! 	spell.h structs.h term.h beval.h $(NBDEBUG_INCL)
  
  OBJ = \
  	$(OUTDIR)\arabic.obj \
+ 	$(OUTDIR)\beval.obj \
  	$(OUTDIR)\blowfish.obj \
  	$(OUTDIR)\buffer.obj \
  	$(OUTDIR)\charset.obj \
***************
*** 781,788 ****
  RCFLAGS = $(RCFLAGS) -DFEAT_GUI_W32
  VIM = g$(VIM)
  GUI_INCL = \
! 	gui.h \
! 	gui_beval.h
  GUI_OBJ = \
  	$(OUTDIR)\gui.obj \
  	$(OUTDIR)\gui_beval.obj \
--- 782,788 ----
  RCFLAGS = $(RCFLAGS) -DFEAT_GUI_W32
  VIM = g$(VIM)
  GUI_INCL = \
! 	gui.h
  GUI_OBJ = \
  	$(OUTDIR)\gui.obj \
  	$(OUTDIR)\gui_beval.obj \
***************
*** 1297,1302 ****
--- 1297,1304 ----
  
  $(OUTDIR)/arabic.obj:	$(OUTDIR) arabic.c  $(INCL)
  
+ $(OUTDIR)/beval.obj:	$(OUTDIR) beval.c  $(INCL)
+ 
  $(OUTDIR)/blowfish.obj:	$(OUTDIR) blowfish.c  $(INCL)
  
  $(OUTDIR)/buffer.obj:	$(OUTDIR) buffer.c  $(INCL)
*** ../vim-8.0.1311/src/Make_vms.mms	2016-11-04 20:35:27.348946021 +0100
--- src/Make_vms.mms	2017-11-18 21:08:23.425148082 +0100
***************
*** 2,8 ****
  # Makefile for Vim on OpenVMS
  #
  # Maintainer:   Zoltan Arpadffy <arpadffy@polarhome.com>
! # Last change:  2016 Nov 04
  #
  # This has script been tested on VMS 6.2 to 8.2 on DEC Alpha, VAX and IA64
  # with MMS and MMK
--- 2,8 ----
  # Makefile for Vim on OpenVMS
  #
  # Maintainer:   Zoltan Arpadffy <arpadffy@polarhome.com>
! # Last change:  2017 Nov 18
  #
  # This has script been tested on VMS 6.2 to 8.2 on DEC Alpha, VAX and IA64
  # with MMS and MMK
***************
*** 299,305 ****
  ALL_LIBS = $(LIBS) $(GUI_LIB_DIR) $(GUI_LIB) \
  	   $(PERL_LIB) $(PYTHON_LIB) $(TCL_LIB) $(RUBY_LIB)
  
! SRC =	arabic.c blowfish.c buffer.c charset.c crypt.c crypt_zip.c dict.c diff.c digraph.c edit.c eval.c evalfunc.c \
  	ex_cmds.c ex_cmds2.c ex_docmd.c ex_eval.c ex_getln.c if_cscope.c if_xcmdsrv.c farsi.c fileio.c fold.c getchar.c \
  	hardcopy.c hashtab.c json.c list.c main.c mark.c menu.c mbyte.c memfile.c memline.c message.c misc1.c \
  	misc2.c move.c normal.c ops.c option.c popupmnu.c quickfix.c regexp.c search.c sha256.c\
--- 299,305 ----
  ALL_LIBS = $(LIBS) $(GUI_LIB_DIR) $(GUI_LIB) \
  	   $(PERL_LIB) $(PYTHON_LIB) $(TCL_LIB) $(RUBY_LIB)
  
! SRC =	arabic.c beval.obj blowfish.c buffer.c charset.c crypt.c crypt_zip.c dict.c diff.c digraph.c edit.c eval.c evalfunc.c \
  	ex_cmds.c ex_cmds2.c ex_docmd.c ex_eval.c ex_getln.c if_cscope.c if_xcmdsrv.c farsi.c fileio.c fold.c getchar.c \
  	hardcopy.c hashtab.c json.c list.c main.c mark.c menu.c mbyte.c memfile.c memline.c message.c misc1.c \
  	misc2.c move.c normal.c ops.c option.c popupmnu.c quickfix.c regexp.c search.c sha256.c\
***************
*** 308,314 ****
  	$(GUI_SRC) $(PERL_SRC) $(PYTHON_SRC) $(TCL_SRC) \
  	$(RUBY_SRC) $(HANGULIN_SRC) $(MZSCH_SRC)
  
! OBJ = 	arabic.obj blowfish.obj buffer.obj charset.obj crypt.obj crypt_zip.obj dict.obj diff.obj digraph.obj edit.obj eval.obj \
  	evalfunc.obj ex_cmds.obj ex_cmds2.obj ex_docmd.obj ex_eval.obj ex_getln.obj if_cscope.obj \
  	if_xcmdsrv.obj farsi.obj fileio.obj fold.obj getchar.obj hardcopy.obj hashtab.obj json.obj list.obj main.obj mark.obj \
  	menu.obj memfile.obj memline.obj message.obj misc1.obj misc2.obj \
--- 308,314 ----
  	$(GUI_SRC) $(PERL_SRC) $(PYTHON_SRC) $(TCL_SRC) \
  	$(RUBY_SRC) $(HANGULIN_SRC) $(MZSCH_SRC)
  
! OBJ = 	arabic.obj beval.obj blowfish.obj buffer.obj charset.obj crypt.obj crypt_zip.obj dict.obj diff.obj digraph.obj edit.obj eval.obj \
  	evalfunc.obj ex_cmds.obj ex_cmds2.obj ex_docmd.obj ex_eval.obj ex_getln.obj if_cscope.obj \
  	if_xcmdsrv.obj farsi.obj fileio.obj fold.obj getchar.obj hardcopy.obj hashtab.obj json.obj list.obj main.obj mark.obj \
  	menu.obj memfile.obj memline.obj message.obj misc1.obj misc2.obj \
***************
*** 490,755 ****
  blowfish.obj : blowfish.c vim.h
  buffer.obj : buffer.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
  charset.obj : charset.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  crypt.obj : crypt.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  crypt_zip.obj : crypt_zip.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  dict.obj : dict.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  diff.obj : diff.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  digraph.obj : digraph.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  edit.obj : edit.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  eval.obj : eval.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h version.h
  evalfunc.obj : evalfunc.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h version.h
  ex_cmds.obj : ex_cmds.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
  ex_cmds2.obj : ex_cmds2.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
  ex_docmd.obj : ex_docmd.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  ex_eval.obj : ex_eval.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  ex_getln.obj : ex_getln.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  farsi.obj : farsi.c vim.h
  fileio.obj : fileio.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  fold.obj : fold.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  getchar.obj : getchar.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  hardcopy.obj : hardcopy.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  hashtab.obj : hashtab.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  if_cscope.obj : if_cscope.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h if_cscope.h
  if_xcmdsrv.obj : if_xcmdsrv.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
  if_mzsch.obj : if_mzsch.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h [.proto]gui_beval.pro ex_cmds.h proto.h \
   globals.h farsi.h arabic.h if_mzsch.h 
  json.obj : json.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h version.h
  list.obj : list.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  main.obj : main.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h farsi.c arabic.c
  mark.obj : mark.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  memfile.obj : memfile.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  memline.obj : memline.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  menu.obj : menu.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  message.obj : message.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  misc1.obj : misc1.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h version.h
  misc2.obj : misc2.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  move.obj : move.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  mbyte.obj : mbyte.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  normal.obj : normal.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  ops.obj : ops.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  option.obj : option.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  os_unix.obj : os_unix.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h os_unixx.h
  os_vms.obj : os_vms.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h os_unixx.h
  pathdef.obj : pathdef.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  popupmnu.obj : popupmnu.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  quickfix.obj : quickfix.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  regexp.obj : regexp.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  screen.obj : screen.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  search.obj : search.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  sha256.obj : sha256.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  gui_beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  spell.obj : spell.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  spellfile.obj : spellfile.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  syntax.obj : syntax.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  tag.obj : tag.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  term.obj : term.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  termlib.obj : termlib.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  ui.obj : ui.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  undo.obj : undo.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  userfunc.obj : userfunc.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h gui_beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  version.obj : version.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
  window.obj : window.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  gui.obj : gui.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  gui_gtk.obj : gui_gtk.c gui_gtk_f.h vim.h [.auto]config.h feature.h \
   os_unix.h   ascii.h keymap.h term.h macros.h structs.h \
!  regexp.h gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h \
   proto.h globals.h farsi.h arabic.h [-.pixmaps]stock_icons.h
  gui_gtk_f.obj : gui_gtk_f.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h gui_gtk_f.h
  gui_motif.obj : gui_motif.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h [-.pixmaps]alert.xpm [-.pixmaps]error.xpm \
   [-.pixmaps]generic.xpm [-.pixmaps]info.xpm [-.pixmaps]quest.xpm
  gui_athena.obj : gui_athena.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h gui_at_sb.h
  gui_gtk_x11.obj : gui_gtk_x11.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h gui_gtk_f.h [-.runtime]vim32x32.xpm \
   [-.runtime]vim16x16.xpm [-.runtime]vim48x48.xpm
  gui_x11.obj : gui_x11.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h [-.runtime]vim32x32.xpm \
   [-.runtime]vim16x16.xpm [-.runtime]vim48x48.xpm [-.pixmaps]tb_new.xpm \
   [-.pixmaps]tb_open.xpm [-.pixmaps]tb_close.xpm [-.pixmaps]tb_save.xpm \
--- 490,755 ----
  blowfish.obj : blowfish.c vim.h
  buffer.obj : buffer.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
  charset.obj : charset.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  crypt.obj : crypt.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  crypt_zip.obj : crypt_zip.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  dict.obj : dict.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  diff.obj : diff.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  digraph.obj : digraph.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  edit.obj : edit.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  eval.obj : eval.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h version.h
  evalfunc.obj : evalfunc.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h version.h
  ex_cmds.obj : ex_cmds.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
  ex_cmds2.obj : ex_cmds2.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
  ex_docmd.obj : ex_docmd.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  ex_eval.obj : ex_eval.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  ex_getln.obj : ex_getln.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  farsi.obj : farsi.c vim.h
  fileio.obj : fileio.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  fold.obj : fold.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  getchar.obj : getchar.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  hardcopy.obj : hardcopy.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  hashtab.obj : hashtab.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  if_cscope.obj : if_cscope.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h if_cscope.h
  if_xcmdsrv.obj : if_xcmdsrv.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
  if_mzsch.obj : if_mzsch.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h [.proto]gui_beval.pro ex_cmds.h proto.h \
   globals.h farsi.h arabic.h if_mzsch.h 
  json.obj : json.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h version.h
  list.obj : list.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  main.obj : main.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h farsi.c arabic.c
  mark.obj : mark.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  memfile.obj : memfile.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  memline.obj : memline.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  menu.obj : menu.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  message.obj : message.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  misc1.obj : misc1.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h version.h
  misc2.obj : misc2.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  move.obj : move.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  mbyte.obj : mbyte.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  normal.obj : normal.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  ops.obj : ops.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  option.obj : option.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  os_unix.obj : os_unix.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h os_unixx.h
  os_vms.obj : os_vms.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h os_unixx.h
  pathdef.obj : pathdef.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  popupmnu.obj : popupmnu.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  quickfix.obj : quickfix.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  regexp.obj : regexp.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  screen.obj : screen.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  search.obj : search.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  sha256.obj : sha256.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h regexp.h gui.h \
!  beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h proto.h \
   globals.h farsi.h arabic.h
  spell.obj : spell.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  spellfile.obj : spellfile.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  syntax.obj : syntax.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  tag.obj : tag.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  term.obj : term.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  termlib.obj : termlib.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  ui.obj : ui.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  undo.obj : undo.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  userfunc.obj : userfunc.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h option.h structs.h \
!  regexp.h gui.h beval.h [.proto]gui_beval.pro alloc.h ex_cmds.h spell.h \
   proto.h globals.h farsi.h arabic.h
  version.obj : version.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
  window.obj : window.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  gui.obj : gui.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  gui_gtk.obj : gui_gtk.c gui_gtk_f.h vim.h [.auto]config.h feature.h \
   os_unix.h   ascii.h keymap.h term.h macros.h structs.h \
!  regexp.h gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h \
   proto.h globals.h farsi.h arabic.h [-.pixmaps]stock_icons.h
  gui_gtk_f.obj : gui_gtk_f.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h gui_gtk_f.h
  gui_motif.obj : gui_motif.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h [-.pixmaps]alert.xpm [-.pixmaps]error.xpm \
   [-.pixmaps]generic.xpm [-.pixmaps]info.xpm [-.pixmaps]quest.xpm
  gui_athena.obj : gui_athena.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h gui_at_sb.h
  gui_gtk_x11.obj : gui_gtk_x11.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h gui_gtk_f.h [-.runtime]vim32x32.xpm \
   [-.runtime]vim16x16.xpm [-.runtime]vim48x48.xpm
  gui_x11.obj : gui_x11.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h [-.runtime]vim32x32.xpm \
   [-.runtime]vim16x16.xpm [-.runtime]vim48x48.xpm [-.pixmaps]tb_new.xpm \
   [-.pixmaps]tb_open.xpm [-.pixmaps]tb_close.xpm [-.pixmaps]tb_save.xpm \
***************
*** 769,824 ****
   [-.pixmaps]tb_minwidth.xpm
  gui_at_sb.obj : gui_at_sb.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h gui_at_sb.h
  gui_at_fs.obj : gui_at_fs.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h gui_at_sb.h
  pty.obj : pty.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h gui_beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  hangulin.obj : hangulin.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  if_perl.obj : [.auto]if_perl.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  if_perlsfio.obj : if_perlsfio.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  if_python.obj : if_python.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  if_tcl.obj : if_tcl.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  if_ruby.obj : if_ruby.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
  gui_beval.obj : gui_beval.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  workshop.obj : workshop.c [.auto]config.h integration.h vim.h feature.h \
   os_unix.h ascii.h keymap.h term.h macros.h structs.h \
!  regexp.h gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h \
   proto.h globals.h farsi.h arabic.h version.h workshop.h
  wsdebug.obj : wsdebug.c
  integration.obj : integration.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h integration.h
  netbeans.obj : netbeans.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h gui_beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
  gui_xmdlg.obj : gui_xmdlg.c
  gui_xmebw.obj : gui_xmebw.c
--- 769,828 ----
   [-.pixmaps]tb_minwidth.xpm
  gui_at_sb.obj : gui_at_sb.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h gui_at_sb.h
  gui_at_fs.obj : gui_at_fs.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h gui_at_sb.h
  pty.obj : pty.c vim.h [.auto]config.h feature.h os_unix.h   \
!  ascii.h keymap.h term.h macros.h structs.h regexp.h gui.h beval.h \
   [.proto]gui_beval.pro option.h ex_cmds.h proto.h globals.h farsi.h \
   arabic.h
  hangulin.obj : hangulin.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  if_perl.obj : [.auto]if_perl.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  if_perlsfio.obj : if_perlsfio.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  if_python.obj : if_python.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  if_tcl.obj : if_tcl.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  if_ruby.obj : if_ruby.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
+ beval.obj : beval.c vim.h [.auto]config.h feature.h os_unix.h \
+  ascii.h keymap.h term.h macros.h structs.h regexp.h \
+  gui.h beval.h option.h ex_cmds.h proto.h \
+  globals.h farsi.h arabic.h
  gui_beval.obj : gui_beval.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h
  workshop.obj : workshop.c [.auto]config.h integration.h vim.h feature.h \
   os_unix.h ascii.h keymap.h term.h macros.h structs.h \
!  regexp.h gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h \
   proto.h globals.h farsi.h arabic.h version.h workshop.h
  wsdebug.obj : wsdebug.c
  integration.obj : integration.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h integration.h
  netbeans.obj : netbeans.c vim.h [.auto]config.h feature.h os_unix.h \
   ascii.h keymap.h term.h macros.h structs.h regexp.h \
!  gui.h beval.h [.proto]gui_beval.pro option.h ex_cmds.h proto.h \
   globals.h farsi.h arabic.h version.h
  gui_xmdlg.obj : gui_xmdlg.c
  gui_xmebw.obj : gui_xmebw.c
*** ../vim-8.0.1311/Filelist	2017-11-14 20:22:54.628809431 +0100
--- Filelist	2017-11-18 21:30:23.845351351 +0100
***************
*** 12,17 ****
--- 12,19 ----
  		src/arabic.c \
  		src/arabic.h \
  		src/ascii.h \
+ 		src/beval.c \
+ 		src/beval.h \
  		src/blowfish.c \
  		src/buffer.c \
  		src/channel.c \
***************
*** 41,47 ****
  		src/gui.c \
  		src/gui.h \
  		src/gui_beval.c \
- 		src/gui_beval.h \
  		src/hardcopy.c \
  		src/hashtab.c \
  		src/json.c \
--- 43,48 ----
*** ../vim-8.0.1311/src/version.c	2017-11-18 20:31:57.539138174 +0100
--- src/version.c	2017-11-18 22:05:56.616505559 +0100
***************
*** 773,774 ****
--- 773,776 ----
  {   /* Add new patch number below this line */
+ /**/
+     1312,
  /**/

-- 
hundred-and-one symptoms of being an internet addict:
2. You kiss your girlfriend's home page.

 /// Bram Moolenaar -- Bram@Moolenaar.net -- http://www.Moolenaar.net   \\\
///        sponsor Vim, vote for features -- http://www.Vim.org/sponsor/ \\\
\\\  an exciting new programming language -- http://www.Zimbu.org        ///
 \\\            help me help AIDS victims -- http://ICCF-Holland.org    ///
