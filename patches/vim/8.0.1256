To: vim_dev@googlegroups.com
Subject: Patch 8.0.1256
Fcc: outbox
From: Bram Moolenaar <Bram@moolenaar.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
------------

Patch 8.0.1256
Problem:    Typo in configure variable vim_cv_tgent. (Matthieu Guillard)
Solution:   Rename the variable. (closes #2281)
Files:      src/configure.ac, src/auto/configure


*** ../vim-8.0.1255/src/configure.ac	2017-10-28 21:08:38.975457036 +0200
--- src/configure.ac	2017-11-02 23:01:22.824712867 +0100
***************
*** 3388,3394 ****
    AC_DEFINE(TERMINFO)
  fi
  
! AC_CACHE_CHECK([what tgetent() returns for an unknown terminal], [vim_cv_tgent],
    [
      AC_RUN_IFELSE([AC_LANG_SOURCE([[
  #include "confdefs.h"
--- 3388,3394 ----
    AC_DEFINE(TERMINFO)
  fi
  
! AC_CACHE_CHECK([what tgetent() returns for an unknown terminal], [vim_cv_tgetent],
    [
      AC_RUN_IFELSE([AC_LANG_SOURCE([[
  #include "confdefs.h"
***************
*** 3402,3416 ****
  main()
  {char s[10000]; int res = tgetent(s, "thisterminaldoesnotexist"); exit(res != 0); }
      ]])],[
!       vim_cv_tgent=zero
      ],[
!       vim_cv_tgent=non-zero
      ],[
        AC_MSG_ERROR(failed to compile test program.)
      ])
    ])
  
! if test "x$vim_cv_tgent" = "xzero" ; then
    AC_DEFINE(TGETENT_ZERO_ERR, 0)
  fi
  
--- 3402,3416 ----
  main()
  {char s[10000]; int res = tgetent(s, "thisterminaldoesnotexist"); exit(res != 0); }
      ]])],[
!       vim_cv_tgetent=zero
      ],[
!       vim_cv_tgetent=non-zero
      ],[
        AC_MSG_ERROR(failed to compile test program.)
      ])
    ])
  
! if test "x$vim_cv_tgetent" = "xzero" ; then
    AC_DEFINE(TGETENT_ZERO_ERR, 0)
  fi
  
*** ../vim-8.0.1255/src/auto/configure	2017-10-28 21:08:38.975457036 +0200
--- src/auto/configure	2017-11-02 23:02:57.148143199 +0100
***************
*** 11553,11559 ****
  
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking what tgetent() returns for an unknown terminal" >&5
  $as_echo_n "checking what tgetent() returns for an unknown terminal... " >&6; }
! if ${vim_cv_tgent+:} false; then :
    $as_echo_n "(cached) " >&6
  else
  
--- 11553,11559 ----
  
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking what tgetent() returns for an unknown terminal" >&5
  $as_echo_n "checking what tgetent() returns for an unknown terminal... " >&6; }
! if ${vim_cv_tgetent+:} false; then :
    $as_echo_n "(cached) " >&6
  else
  
***************
*** 11579,11589 ****
  _ACEOF
  if ac_fn_c_try_run "$LINENO"; then :
  
!       vim_cv_tgent=zero
  
  else
  
!       vim_cv_tgent=non-zero
  
  fi
  rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
--- 11579,11589 ----
  _ACEOF
  if ac_fn_c_try_run "$LINENO"; then :
  
!       vim_cv_tgetent=zero
  
  else
  
!       vim_cv_tgetent=non-zero
  
  fi
  rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
***************
*** 11592,11601 ****
  
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $vim_cv_tgent" >&5
! $as_echo "$vim_cv_tgent" >&6; }
  
! if test "x$vim_cv_tgent" = "xzero" ; then
    $as_echo "#define TGETENT_ZERO_ERR 0" >>confdefs.h
  
  fi
--- 11592,11601 ----
  
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $vim_cv_tgetent" >&5
! $as_echo "$vim_cv_tgetent" >&6; }
  
! if test "x$vim_cv_tgetent" = "xzero" ; then
    $as_echo "#define TGETENT_ZERO_ERR 0" >>confdefs.h
  
  fi
*** ../vim-8.0.1255/src/version.c	2017-11-02 22:38:47.820893348 +0100
--- src/version.c	2017-11-02 23:03:14.604037771 +0100
***************
*** 763,764 ****
--- 763,766 ----
  {   /* Add new patch number below this line */
+ /**/
+     1256,
  /**/

-- 
It is illegal to rob a bank and then shoot at the bank teller with a water
pistol.
		[real standing law in Louisana, United States of America]

 /// Bram Moolenaar -- Bram@Moolenaar.net -- http://www.Moolenaar.net   \\\
///        sponsor Vim, vote for features -- http://www.Vim.org/sponsor/ \\\
\\\  an exciting new programming language -- http://www.Zimbu.org        ///
 \\\            help me help AIDS victims -- http://ICCF-Holland.org    ///
